# -*- auto-fill-function: nil; line-spacing: 0.15; org-odd-levels-only: t; -*-
#+STARTUP: hidestars
#+TODO: TODO IN-PROGRESS | DONE
* Improvements
  [X] in scenario faction editor, amt up/down arrows don't seem to affect the actual number
  [ ] Finish consolidating figure editors
  [ ] Why need to keep resetting dropdowns when adding characters?
  [ ] error checking / validation on character resource entry form
  [ ] list of recent painting guides, a la battle reports and news
  [ ] Uruk-hai Captain
  [ ] automate way of associating new figures with old figure's scenarios

* TODO
  [ ] Add Aiwendil's BGiME scenarios https://aiwendil.video.blog/
  [ ] Add Zorpazorp BoPFSS Scenarios
  [ ] Missing Great Beast of Gorgoroth Orc Commander
  [ ] Fell Beast rules are in AoLotR page 149, but we don't track Fell Beasts separately -- how to handle rules reference?

* Add animations?

https://flems.io/#0=N4IgzgxgTg9gNnEAuA2gBgDRoLoZAMwEs4BTMZFUAOwEMBbE5EAOgAsAXOxPCGK9kvyYgAvhmr1GSFgCtyPPgKHTCdAA4wo7AAQ0AruxgBBKqpoDt+WHW0ByDuzVgkAehd6qagNYBzZrzoXAAF8TTovQnYXfUMAWhpTOnMSWwAdKnTeKjAdABlCHO0AXm0ACgBKYoA+bWB07W1SHUMAExhi7RQAEWTmKhgAdwrseu1R-A8IdkI+XRaWgBUYfMKK2tGG1phmNT0wVlKegT7BivLRkVHxyenZqBI6GAA3EgAxaxWdUqeaOD0SSp1KgNTYwNodLbMIhwARQUokODVbQI7QAQiKJR+fwBFyuwMsNxmwKehBIAzKgI22nu7D0UGBdFKtmYYBIUyJtgwnSpDUZtloTx2CQRnPW+JBIL40BIyVKwG0bRsIkp4olIJixkSssVlTc2gAEiR7rYwNp2KwSNokj5CBAeSDLqqGmJuU6QXy1EKqAjYhaaC1CFQfKLbAsAPJdMO2coYe0NFBxkGQpJqeGIoo1Pk0L0+gBGcBgEC8oqBarL2i8JAAnkhtAADLaxAAkwARIjriedXITbrLfLAagSObgsVtfFFPfL5b5uYMhiozBaCJIAhLnfL7CrahItdss-Y88567LUrgtq8FLFU+v1IezzeHwK7DT51718dN4lyuP2mwMZ-CLrn+r5TrgiZ8sOsT5oWxbduuM5znwzD7vOzAFLEahQGYUBVmhYCxBMCADIQLTmmub4Spu267ih46xhRkpUBAZ5Fpepafg0-qLMsT4VD+H7vlythGPMyKkAw-DRomf72jJqpyc6eINDSdLAvKJJktojqOukdDMI8HjPm0EB6BJ7DIWCVZcp85QgHgrKkOyfDkNIACMADsSAACwAGyiOIIC0AwTD+GA8ggFkSjsMIIi4CAZ5UF4LmUIFkhMHQkSsFh3AgHSiDSA4TiuO4ni+P4MCBBl5rZUEABMzD1bVLhVVlxD6YGzByHZIBUVI4DQIQajRWIEjBdIs5wEk7ULhAYXdXlTCFc4bgQC0C5yEuZ5PFAfQri4niBBNSRBGgzAAJzMF5LizWALhHdmGUzXNeC9UwORVqQojYCIQA

* Bugs
  - Rangers aren't really a separate faction!
  - Edit Character: Book/Faction selection widget selections persist visually but don't actually keep the selected value
  - https://www.sbginventory.com/#/figures/135 : why /two/ Field of Celebrants ? => figure used as multiple roles
  - no "More" buttons on About page (related to admin or login status?)
  - Shouldn't show By Ownership scenario filter unless user is logged in
  - Are all the Unaffiliated types really unaffiliated?
     . Morannon Orc Shaman
     . Rivendell Knight Captain
     . Warg Marauder
     . Grey Company Warrior
  - everywhere: admins have option to turn off admin tools
     + Credentials.showAdminUi() - use this instead of "isAdmin" to decide whether to show admin UI or not
     + account.js: add toggle button
  - look into Postgres "unaccent" search https://elixirforum.com/t/putting-unaccent-in-existing-query/22006/9
*** Responsive Bugs
***** account.js
      - too wide
***** login.js
      - too wide
***** scenario-details.js
      - need space between factions (which is an issue in desktop as well, actually
      - "mouseover" doesn't work
***** figure-details.js
      - notes box is too big
***** scenario-list.js
      - slightly too wide on iPad
*** Database Vetting
***** Aragorn
|---------------------------------+-------------------------------------+------------------|
| COLLECTORS GUIDE                | SBGINV                              | SLUG             |
|---------------------------------+-------------------------------------+------------------|
| Gimli (Fellowship)              | Gimli (Fellowship)                  |                  |
| Gimli (Amon Hen)                | Gimli (Amon Hen)                    |                  |
| Gimli (Helm's Deep)             | Gimli (Helm's Deep)                 |                  |
| Gimli (Pelennor)                | Gimli (Pelennor)                    |                  |
| Gimli (Anduin)                  | Gimli (Breaking)                    |                  |
| Gimli (Hornburg)                | Gimli (Hornburg)                    |                  |
| Gimli (Hunter)                  | Gimli (Three Hunters)               |                  |
| Gimli (Mines)                   | Gimli (Mines)                       |                  |
| Gimli (Hunter 2)                | Gimli (Three Hunters, Middle Earth) |                  |
|---------------------------------+-------------------------------------+------------------|
| Armoured Boromir on Foot Banner | MISSING                             |                  |
|---------------------------------+-------------------------------------+------------------|
|                                 | Legolas                             | What to do here? |
|---------------------------------+-------------------------------------+------------------|
* Code Review (FE)
*** real icons for faction edit (halfway there...)
* Code Review (BE)
*** upgrade Elixir/Phoenix
*** role.ex shouldn't be using Repo; move into controller
*** role.ex:40: => role.figures |> Enum.map(fn ...)
*** recalc_user_scenario_task
    - [X] recalc all scenarios for user (existing code)  [maybe should gate to once an hour or so, though]
    - [ ] recalc scenario for all users
    - [ ] recalc all scenarios for all users
***** recalc_user_scenario_task.ex
******* example data
r = [
  %{
    id: 931,
     amt: 5,
     figures: [
       %{id: 71, user_figures: [%{owned: 10, painted: 4}]},
       %{id: 13, user_figures: [%{owned: 7, painted: 2}]}
     ]
  },
  %{
     id: 3,
     amt: 12,
     figures: [
       %{id: 28, user_figures: [%{owned: 0, painted: 0}]},
       %{id: 142, user_figures: [%{owned: 24, painted: 0}]}
     ]
  },
  %{
    id: 931,
    amt: 3,
    figures: [
       %{id: 71, user_figures: [%{owned: 10, painted: 4}]},
       %{id: 13, user_figures: [%{owned: 7, painted: 2}]}
    ]
  }
]
******* Reworked logic
#+BEGIN_SRC elixir
defp do_scenario(user_id, existing_user_scenario, scenario) do

  roles = Enum.flat_map scenario.scenario_factions, &(&1.roles)

  roles_amount_needed = Enum.reduce(roles, %{}, fn(role, acc) ->
    Map.update(acc, role.id, role.amount, &(&1 + role.amount))
  end)

  roles_amount_painted = Enum.reduce(roles, %{}, fn(role, acc) ->
    Map.put(acc, role.id, sum_role_figures(role, &(&1.painted)))
  end)

  roles_amount_owned = Enum.reduce(roles, %{}, fn(role, acc) ->
    Map.put(acc, role.id, sum_role_figures(role, &(&1.owned)))
  end)

  calculated_user_scenario =
    %{default_user_scenario(user_id, scenario.id)
      | owned: => sum_roles(roles_amount_owned, roles_amount_needed),
        painted: => sum_roles(roles_amount_painted, roles_amount_needed)}

  save_scenario(existing_user_scenario, calculated_user_scenario)
end

defp sum_roles(role_map, max_map) do
  role_map
  |> Enum.map(fn {k, v} -> min(v, Map.get(max_map, k))
  |> Enum.sum
end

defp sum_role_figures(role, take_fn) do
  role
  |> Map.get(:figures)
  |> Enum.flat_map(&(&1.user_figures))
  |> Enum.map(take_fn.())
  |> Enum.sum
end
#+END_SRC
******* No longer need defs do_faction, do_role
******* Maybe then no longer need RoleUserFigures
*** router.ex:
    change singular /faction, /figure, /newsitem, /resource, /userfigure to plural (remember to update FE and Swagger accordingly)
*** scenario_controller.ex: "plug :scrub_params" needs investigation; figure_controller.ex probably needs it, too (actually, docs say API prolly DOESN'T NEED this...)
  * Figure Details: Can paint more figures than you own (fixed on FE, but back end should handle, too)
* Resources
*** Elixir
http://stackoverflow.com/questions/28664119/in-elixir-is-there-any-way-to-get-a-module-to-list-its-functions?rq=1
https://github.com/rrrene/credo
***** .iex.exs
in directory, runs this file when you do 'iex -S mix'

*** Phoenix
http://stackoverflow.com/questions/29313717/inserting-associated-models-in-ecto/29318328#29318328
https://github.com/xou/elixlsx
integrate action_fallback into the controllers (https://swanros.com/2017/03/04/action-fallback-contexts-phoenix1-3-tiny-controllers/amp/)
https://lobotuerto.com/blog/building-a-json-api-with-phoenix-and-elixir/
http://cultofmetatron.io/2017/04/22/thinking-in-ecto---schemas-and-changesets
followup: http://cultofmetatron.io/2017/04/25/thinking-in-ecto-part-2/
***** cast_assoc links

https://github.com/elixir-ecto/ecto/blob/master/lib/ecto/changeset.ex#L4
https://hexdocs.pm/ecto/Ecto.Changeset.html
https://github.com/elixir-ecto/ecto/issues/1873
http://blog.plataformatec.com.br/2016/12/many-to-many-and-upserts/
http://ezcook.de/2018/05/15/cast-assoc/
***** Error Handling
http://joshwlewis.com/essays/elixir-error-handling-with-plug/
https://hexdocs.pm/phoenix/errors.html
https://hexdocs.pm/phoenix/views.html#the-errorview
https://stackoverflow.com/questions/36309403/phoenix-rendering-404-and-500-as-json
*** Mithril & Flems Examples
https://github.com/lhorie/mithril.js/wiki/Recipes-and-Snippets

popup dialog (sort of) in Mithril: https://jsbin.com/fidubu/1/edit?js,output

show random GitHub users: http://plnkr.co/edit/e5dv97?p=preview
***** authenticated site

https://flems.io/#0=N4IgzgpgNhDGAuEAmIBcICGAHLUCWsG8eA9gHYB0AVmCADQgBmeMtqA2qGRgLYRqYArvAAWEMsULFy1Wg1jlEEgQB0yCsmHgACAE4kSOgLzaA5CPjwsYVAHpbuiDwC0jrc+x4KY-QGtB2FgUCjy2nqZqajA6GMJiEgREyNomjBhQkJHq5FrasaLikkkp2gAUwBSVSEQYAL4AlCkAfGra2jwUjgCOghBa5a1t7RCiJEioZgAKAPIAygAqpnSDbYK6UBP6htoA1GZhcYWJiEsr2tXwGMtkbQ1ZGrkA5gG6SCWljUZN2sCDeIylACE+XiRUQSHqZw6+mEEAokHgpVMtigJEeeDISx+ZzaWEcADdSIIbO1OiRYRRHiMPmcGto1LUQLU6FxePx0IF8FJSJQaPQQBolPABA8dAA5DD4kq-G7aQkQADuEw+zW07DOyNOsrayIwACNyfAtUN9qj0ZjribkXiSMwYMahsizYaHQBdQYUHjYUprPDNKFIjBYmUmtoiRyMCa+y2h8iwRxJCbQw1w-BkXwxk1aACeMAmwCwGCQSAxjwmpgoAFYnFi9RhYL5HjCyOMzPhHhYmxBs6ZarTM0NfWdIbKR21Pd6075-dq1VO6GYzO7Rwz7jkdJMMFTpYN5QrtMrgER4LoScBiPAYMztLARCwkI4yHSvmqA+YAIxYi8weoDt-h0xfzOAMJXxIDZzOSpgjvKAH3EGNlz7Mg1FFbQAAkSD4HdZT3A8yk+b4A03KkFxDUNvwgcsAHVoBCCBAQiWdmRxdokSwLFTBoqA6O0eASHabNtDAPBEAobRJhgDBIF4jBfAgPJtFREhpwwZskAoQCBxHJCUPXbQAEEDWEbC2lw5UCPpWceFKYiIFIliKPLQzDV4u8wCEkSIEYk1mNnNprNMdiF1MABJdoi3k0Q8Hc4TEF4-ikCcdddGKEEjm5cgJgKbQbTteTC23bpBDwNw8kOBIMrIBjwJNbS100Dd9DykztHIDERLw55VKQGNdzwRU8JVF8iK3OzsT83iRLzMx5jc7Rou0bNyV0HKmpYfLRu8oZfNDVjAo4kKdAWxhBCgKBWsYVa8HxYoLgwMSAE1ySEkRyVg1qyCgQS9Xk-UYHioSIEiuaMEYRAVrNc1HnmyhNOHVdkOyBrtAAGTRDEWrM-DVRGkjxt2xyzDR80ttuAd-KRRgSF0HhgxYtoc2msjdp1KmJGcYSAC8vLw0wACYa3p7QdpZnJBD1HgOomeSX2Zlm4TxCB8UKAARCA0lOxExxZtohbaVDgGgJxCjAWoSjhS5dCpeA9csnW2jSiqkgGCbdu4LDpZgPgJDACh3bhG6oF6cmWcLMAwAVam3k942fYoMOI6jihA+D227ldoYKAKMhSiG745Z1x2wWSEwT16W3dYzk1kwpBFShr0TCxSgLFcJckwEA7QAB8u-2XL1sAtPtd2pCR5DinTAxLBhHYf2jH9112FwesIFe2CIF0IxiQ3he4YzgKp5nueE8j15F-gbMsAgIwT6jxfl9gVeSHXzfb7PvedaFg+yGn+B2Avq+RgwDi0lvAV0H9Qw1SGHVRGqFiYuRMGRcgXp4C3kGhZOWRdjgl20GkDIEBgJWTJLXakTp0aYm1khHSZAG4QFKEgEgsBBDe3gBQA0SBszBVsHTWUmodYTAwnwGMuojJGiGBMZywhhG2H7vaPCkw1owGkWaDEphxGo3IcotELo2gTHgVIhk9QmSugYFONgnAQD+wEKA8MLB+RrCgAICwVgbD2EED-RswRMK2BsboFgAABd8FAgkAGYfEiVsVAWQ-IAHshAHyWorpahAA
***** Tabs

https://flems.io/#0=N4IgzgpgNhDGAuEAmIBcIAqBDARmAdAFZggA0IAZgJYwmoDaoAdlgLYRqa4HFkiwB7JomGdBTMPAAEANyoQA7gHkKUgLyz1APgA6TKbPywAFjSQAnCE3oAGALpSAZI6nwAngAcIA1TKOmoCytbO38zS301DQByCgBXJgQqIWipPQMAfkMTcOD7MMCIqVQpAAoASm0pHMKrPT0IAA8PAXNpJAgKLDioaVLgLHh4czBUYComKngqLCh1KRsAX0XKtS0pYHSpGGksJJkIeYmpmagtndduA3mbc4hpDywmaDAbra3xSSlsHHnN-WuckUJX6UkkgwgpGqASCTChg2Gow28Fw8xReAA1BjFlIVlUttcpKxStF8B4ALQAJmiUP+hMJsCgWDASPR6iiUj20wOBPpmSk0RwrQ65ikQvMIvJOCgcUOiEa8ClMsO5gECQ6SGivL5JWixgEB3MqHliulsuqcRGrXJLQmiHMNO11yEjKosAA1iDVus6XzrlyqAc0bgnQZFqQneHQ9DcnCneUIwDFu8AZ9pD8AApPaB-XlAhQg4BglGIKE1WHwoYjErANkaR7PKBgLE4vFrJ11jkBoPOGO1ONJlMGSzwS36X0GfMlGRVUodq4GDQ2RN8hsvG4r+lO-MqUoycr9aM-Td8zPZqAn64rXnlLbJpiLPiQGBJIR0EAAZhsqAAjB+QOGzBsBw6BECQ5DiCI8CcFQrAtG03xXBQqqsGkID4AA9D8YA6CAADc9RMKw+CsGqwilEgAiwHE7DCPgQpIG4UIVFUvoXGAVAdDgWDmAAkmASheJEUhdE2EBDlII5jhsebyAWZTek6xKkqw5IACyOgCfLErhxg-iRODkgAHLhUK4dhJQAMICHBZFINUNktM8wivAoUzGA5whNPAuEJoRfpEiSxiUgZ6k0gK2FSEIrjGIcMAUPA0R+VpW4pYSxLYcxwDHohOBZo2bbrPQ0YGMp+AUDAjSaQF6UkuVlX1U05KCFA+AKOSH7UpeNWBTl0RKM8SXdTVGW4FC0QYAoAhDSV9KjTg40YMYlgQDNaV+sls2lXVrBQOpZJUvRwoQOY5J7V1W3XPN+XQON1lecIUg3XMA2rclPW1WejZ3UIUFPee3xTWtH1XaUX23QK91-c93zLRAb3DXy701cjfJ2Jt63bXq5hHRKJ0kW4xlrdGynBeFE1XBMnJgpxEDcQ6qOpQFykeOTADq7lSCw7D2WylgUCdViwBArxPPZxzTLMly-B0jI8YMyRMMTmO9dwtIS6cuqTdN4YGP0OXg1AhVSMVKtYwdam4yKBP7aq6rIPgYDGFglEKNVH3XeetLorqr3RLr0RQ1Y0gw37jPM2DuDPd7uBa0DAdB49MPa8DHuR3lXvIrHEVw6tCe-cH-2NrDK2pwFGM9RxXE8fxglWE4jiXWV1CNA7HgTOSOPt0w5LwGSHc4G15I-hhIU4AA5uSCimIgVsne7IPzTHOC+4NAdh4jfpL1nK8RfHi1A+HI3p8vWu5-7i3n0fSOJrNylIIGC-H4KcRDEIB1j8dON20wGr0ZPZoID4BNFPGeq1aSXQMC6KAbpPQKVYpA64Vc6Y1wEkJeYABCZB9Na5CUQVGM2V5FoCHHuPGANNq4M1mtfKQ6N4ybnvNeJgfBBBwRoCdNATAegXnANAOA0w3ycE6qgAAbAATgAnYcgMCmDujoIwEA3MQIgFYO5cwNA+CWigJwYwQwPCjAwhhBIHh3TjyMDZDCqj4DLRoAAAX0vpERli1E0DAnwdwXhOBgFgOojw0FAKKOApwFENA3K-yMCyTR5htHoF0fAfRqBDGwCQEwMCHQYEyBxs8eAGEmAeFYBhEJUAwlIFgCyDCD9JCFKwKEiYSAIngRAB45Rkg3AwEkYsIAA
***** DaveT RoleEditor FE
******* Stage 1: Autocomplete
https://flems.io/#0=N4IgtglgJlA2CmIBcA2AHAOgKwHYA0IAzgMYBOA9rLMgNoAMedAugQGYQKG2gB2AhmERIQGABYAXMNQLFyPcfHnIQAHigQAbgAJoAXgA6RAEYBaQvD6liow1uKw+hQgeNmLVmyAB8+nvvEqrOSkYD5+4v4qEDwADgCu4nYOTi6EpuaW1ibR8REgWjEOxPCilFDwpC4AovIVWgCe5HGkWhkeWgohGN224vUx8Knu1rYafLBxg4a2-IJDmZ46UPMehmH+kTkJSY7OhmluC2ZxRpB5Hf1TRCdno+OTLmu+GwGEMXw8Oyn7phCyPIdVt4VAB6N4fdYBEFBEJhUHqDReEAAXzwvAEQhAABVLnxRBYoBgAFZcGRyBRKYQgkG6Wl0+kMxlM5ks1ls9nM3z-QiJHEDPEErS6LQaHjkcpCrxaYC+LR2OQ8rR8cTiUiEIUisXlDDK1WEADcsq0RrGLSgyr4GpoTENnxFlla8AQxAUUAAklAAB4akwARltcqN3MS5VkpGV8AAchiNQAKQh4ArkBNaBA8ACUkq0NCNcrlhAwhBOPNI0QA5rGGEnCOm8Lm82BY-t3jwaPZdroAOSiCBl0SwXsSTtMQyJgtFowl8uxmLJxOz9UAalTinTtfr+cLxdV04XWmXafT9ZHdsDduDjud4gAynEy2X4DyIHINeJLA-EropTLTx13-BxAwexk0fcQmxABEMD6fl8T4KATH+N9ogqQx0wwD8qgQQR5EIAAheosT4Mto0EcCtjydN6CYDAxgmeANWmEAAzzc03ytG163MK94HdL0fX9etdTVDA5DdBQwGvJ14BdWM31ID902Y5F6yDBVEiLe9QOfHgAEEVTVOMU2gT1My-aV61IADmk+AB5IwiWkwDdl7Hgm1-OUfzzLyvkIEj4CQJZvTpS9HJ4j1vQAfmNIgpJdHjbACxi63cvM5HsP4AGsAvgbQzK4xzb00p85FjHKoP-cQjxS1ENy0OyHJdDAMvgepCHjNDLKgOJijc7y81jPhiGIRNaNM79jRSrzBuIHMIItExbGXWimEMmhlv3aLUIwSzCkG+BYxBQwQTLRNO30c7zpATtFNqrzLPEaylSG5i+pqybpWRKqvJuu1lL8c81K0UQPjgeAAGkWrjHKxvM39CAAdwgcRrC0UqNAweGe2sTNPLzYhHHo30AGYAupLRFE6WqIFYVH8ri3jvS8YU6Bx26QpdQqH2K1yyrkj8gNgECeXAqDcVg+DEL4ZDSC2jCsIpvD6gAYWSXyMXAjSufEbTUJoOnXXCpgfte2qypiSyNApgAReBWD4OJYDA43vPux67dgcwXrzet8fMLQACYcFJkFyZIWrWMtYVrS9-NYoNvjhT9GPyfR82cut237cd2NnbuqzSE+d3Pdqn2Ca0Im0GDrQ4hiWr9bChOtAAWWVUQMDAPhPUrMc44b70TC0X1c7zM2LYzu2Had5PXYLrQi-gZPS79gAWOgq6gch4f+vr64ZjUW-ENvIFc3fwo231EwjjA0zLQ+tAHofk9H9P5Btifs+HuUZ8L8Zi9-P6vL1gjhqXmFUaL3HosFRiWgorWi0AFISBZ2A8CgAfawj40blXkgBcBdEvp5m-h0UgkwlJGiNIQ3GcoNAQHgPDAKsZgCIM+lmWqjZOyixggSBC5IpY8AqJ2RMbM2HkRoNBQYbRrBMAERNPqXlgAyNkV5XaxRSiwHKKQBB+kCzKJKGUOoAAffRWhOySQWN0DAAi2ZeTkM1eoNcArAxQQgCG9QrFaE+slRRcor43zvrSLQdA3FyiijwB2sAgnwK0I2QwW4irawVKOCJXlokgAdqOLQV8O4xFjPGRMxkYYpIHLErWOsQCCPel4ypVT8x3hKXIPSepcmBXXBU6pbS+qhmCBGPy8YMCzHgGODAC5BmHjXGuW6+DkS2j+mUmKV5tJcGEMvFASB-ZExRGiEA-TlDElJCARCFNlAXhBq1K09Z5HQACr6NZiYxEBU7KwaR-T7knKBk0cwnZ3GeLzBcqAAVl5YBQLcy49zHmJmecY155tkwZXqJ8t6cilgBUDsCgY9zCBPIxC8lB9QtClmsJ0eF3yPJIq0AATn9qi-yxiwVaAhZ2V5h9gjyDkES85pK0BkqpaCzFghsVQFxeITePBzAoLZTwDi-0LzmktuqKO7LLmDzoPgC4aLjEYvBVi4xMr6JlgoP2cViLFU4CJty9VvLqWdh1VEywhBgZUENT80l1yzVnRAKwQwFr7mGB1b0YVoqoCOpJYq30y9XW0ohT6vgltjSXSLAMUgvrLqxv2DXCogseBln6WWcgj58SWQuvkZMRhmWGD+pKrkgMJGiDjBHMcqoxpGivuwR2FRYxBSlJ6PpGIMDRHKJ6GyrB4wNq0EzAJ+CvLtz4NkjtdV7KOR1E4Fy7bEzyIXAFLt-Te0oPgAOodJZawrh4AFEs19FC3xrZ9H6laRXqWGKIHSOK5WtFVFmatA0n31tID9C81arbRsfBqEsb772xh1SmA9tob2Kn1o+gVr4KpZmyYYODuLFp-mwYBCO5hAL9I2rYdDfMcHYZwWI-D+RCNgJI4BaAP6q1x3-TG4URHPxSmQyARj9FKOYYwNR7tghyPRQ2ix3jFocMcPosuAj+Rlwib47RqD-0wDtyaPIMD5BiBxGwoBEtArEw5yzPI8h+dPiUJFDQuhqMYZCJFjCMA3D5C8JQmU54rTGx8gsOLVdSSChFF0WoioiUQCmPaKhgsPQXOtK8sg1Byp0GEBPfesLxKqmiXEpJK8iWryoYiR4txKSjAyxAC0yp7mxYEm81FvMOjVHqKCyFlGnHwsYESVVuUMW0H4gS46BYTWUuVLS-ACSccsuOU47lid3lJm+E+vqWZsgwAxA4BUZAoSqAEH1gs5Q1ykBoCwBs9EggdnECcPN8khzhASYFHBBzSE+EtFxuoN4Dh6gBWiAOPhJgjCC2IBlW0IIABUcomjiA+9SwglBoCDxiN6Tq+oAeHR4H9XwxStIKlhnKIwg0Mp6tU38rQABiVgxPmJPd2q9ueCBPTMVYFTkw6hLIum0gFWQEwwA8GYgOHkZg+gIBMHculcgF5Gg7vJaIAU6DMXeDAcsEvmIls9GYYGG9LN0HLjDrQaANdq-klj7uDADcYH9rWNXpvoew7LHrg3jBGAYDoGgZ2C4kbM6VJOSgCRhdI9c6j7m6oHYY5tWL49ASpdwXUJmkwCBWDiAl9gIb+ozzI54D7+JIrUwQAD5ptUwQAqzmiJ0TnEBuc8nqAgAKYo+Gh5lxHoVMRY++iGzN73ms0dp4HK0FsYhBwDj7IkXGrOc94p4tM5vtTW-qiKbvAPWPfu47iCg7hgsNGE6gMQMl0zZmbYVMof2qyyUohYCAD7GVFk0EO5iM4ohSzSFSaQagwgJDiBiAl6k8+Yg46AuQMAIJL-X4AAK+gYCAEoA-5IxX4cC7KzJiLKAkClgxDiAH7IhAA
******* Stage 2: DaveT Role Editing (Functional, but needs Refactoring into separate RoleEditor component)
https://flems.io/#0=N4IgtglgJlA2CmIBcB2ALAOgJwGYA0IAzvAgMYAu8UyIGphhIBhpATgPayzIDaADHj4BdAgDMICRkh6gAdgEMwiJLQAW5MNwKl2synpoAeKBABuAAmgBeADpEARgFpi81qVV3zpWPIa2HzvCu7nYAfDayNuSGouysYOGR5FGGELIADgCu5F4+fnaETi5uqo5pWckg5uk+pPCqnFDwrP4AonrN5gCe7Jms5sXu5pTxGGOe5F3p8P6DHlWm8rCZM3aeCkqzQSWe1gXbISCJUSnl2bm+hLNFB6WEmfaQlcNTq0QPT56Ly29hESfRQjpeSyC75AIQHSyQLBeahQwAeiBIOO0QRsXiiURJlMoRAAF88HJFMoQAAVV7yVRBKAYABWjG0un05BoCIRVk5XO5PN5fP5AsFQuF-IiUMIOQp0ypNPMVnMplk7CactC5mAEXMXl0EvM8nI5FYhDlCqVTQw+sNhAA3JrzHbFv0oPr5CaeEJbaCFa4BiR4BQqABJKAADxNjgAjJ6tXbxTkmjpWPr4AA5EkmgAUhDw1XY2fMCFkAEpVeYeHatVrCBh7vYJaw0gBzDMCXOEIt4CuVsAZgrA2Q8byXKwAclUEEbqlgE-UI6Edhz1dr9abGfSeZz6+NAGoC-Bix2u1Waw8V7Jm1vzLvC0Wu-OvTGvXHfWRyABlTKNxvwCUQXQm8hXG-HIrDVDUH2GID4HIOhYDzH9yF7EAcQwSZpWpeQoEcKFALSZo7CLDBgNaBAlD0QgACEujJeRGzTJQkLOSoi34IQMG+FYTTWEBo0rZ1ALdD0u2IV8g1DcMoy7S0jQwXRA0oMA3z9CgM0A1hgKLXj8S7WMdRye4vwQv9ZAAQQNI1M3zaAQxLUD1S7VhoL6UEAHl7Dpf0YMuCdZF7CCtXAysgrBQh6PgJBLHErkX08sSwwAfntIhlMoKBPAi7jO38ytdG8SEAGsIvgCw7JEzyP0M39dAzYrUKg8hb2ywkj3MNyPIoDB8vgLpCCzQjHKgTI6j84LKwzeRSFIHNvlssD7WyoKJtIctkJdRxPF3b4hEsngtqvJKCIwRyagm+AMwROwEUbHMRxsO67pAEdNJaoLHPIZy9Um3jRuahb1XxRqguer1tMiJ89PMVQQTgeAAGluszYrZvsiDCAAdwgcghhq0wMDR8d3BLQLK1IXx4HMCMcAi9lzH3EYWogURzCzFK4vMUJ5T4ImXpiigKu-KrfNqtTgNg+CJSQ1DKQwrCcPkPDWEO4jSLpyiugAYTyUKSSQgyBfIYyCJ4MqAygYMQyEYGfpa2r0kc0w6YAEXgUR5EyWBEKt4K3o+13YGIb7Ky7UniHMAAmFBqYRWmWBa-jXXld1A6rVmzai8xI2T2ncbt4qnZdt2PYzL3Xqc1hQT9gOWuDsnzBwAAOKPzEydIWpN1LzZNABZfVVAwMB5BDFtF1TzvHApkvK1t+389d93Pazn3y-MSv4CzmvQ7QPgm6gdg0bB0b27Z+Ue-IPvIF8o+07DXcIxzeOMELRsz4zies+nvO9Gduei8nrUl4rksKuEFQZBS7PHE0wt6rsSWJxaK3FzCJXdOYCK0lqziFkFAU+7gfw4zqupaCMCfiA0rAA4YrAVhaTtHaMhxMtSmAgPANGEUMzADQQDUsLUewjiluhGk2FmTy1kM0EcOYebcKYjwNCMw5hCFEfNUaQVgAKMUUFE6dQGiwCaKwVB5lqzqPqI0ToAAfYx5gRxKVhGMDAoieZBV0F1LoLcIpQ0wQgeGXQ7HmABllVRWoH5PxfpycwfAvFakSrId2sAwkoPMD2OwJ5KoGx1AuGJQV4kgHdgucwD8B7pAzFmHM1lkYZOnIk-WhsmAqL8TU2pqi9ZGV0GZK0hTIo2V8XUzpXSExxGTGFLMGANjwEXBgLcIybxFkmSQ4KJD8SelBkwZKr5jJSBAGgAAbEgMOOACREhAEMmg9JGQgBwnTGgz5oY9TdF2ZR0AIoRm2TmaREURyiHkUMl5lzIa9GICObxHSAqRQimgAArOsp5rwXlvJzB88xXy7Z5nyl0P5v0lFAvDigCF0wXmEHeSST5mCujmAbO4EYKKAXqnRVgMOWLwrmOheYWFI4vlnziHoXQ5KbnovrlgWlUK8VKAJVAIl5A96yGIJgzlsghJg2fM6B2xpE5cruRTPgmKXjYvMbimF+LzHyvJo2DgU4pVopVSgfAGq6Ujm1Yy3VI59VxNcIQKGXATWVluVAe5NLLUvLsKIOwAqrV2H1RMMVEqoBusBSqiMaA+X0sDRlVaDt7QPXuNMVgIaHopoKC3ZocFzxDMbOwH81JHL3SqHmewbK7CgxlWKCGcxMzx0XIaWadoH7iA9s0DMYY7IhkGSSDAaQmghhcqILMrb2ac2mZWfu8h8m9rVG1TyFoGA+R7TmZRW4Ir9qGUOzB8BR3jvrB2PcsgIr1kfvuZ+qhvGTM9PW8V+lbgmUJYqgYhpSxzHGm+ltrBgbPjmI7eQCqTT1i-bcDM+r8wnofbIQDKVX3CoAvVUs+S7BIaJRtSCBCYLx2IDBIZ+1PDYZFoQ-DhDpHEaqKR6BFGYLQAAw2lKwHk3yjIyBNU6GQCsfJrR3DGB6MDqUNRpK+0OOCZdAR3h5NdwkaqLuCTQnGNwYQDkAASi5AAMq0N81yvR0PRQ8-AUkwDkHuRSwgcRyAAH04jaIs12WFdgKI-FSRBcQjY+g-giuWbKHqvUWucyAAAUi7f1VSah9CWDZ4LYXRCiEINk555jSDyMyLICAABHFYEVDScVRcFALFNvW2sFUlLu2RKibmWEmWAsXdV2EqwaZLkLUvpcyzlul+XyagMrPeLUhXDMqtBeC6peozMRXrpZ6zdmM3NAijSpzjWQDqaoO5oKnnvOEF8y1YrWB67quC2ttKkXasxeO1QJLVSUsjjRh17LuWV5AN63eO0Q2uwqt5aZ8z5hpvCVm-ZhbdcKXBYAOKOX3BtysW3HI7bLHt9FYdptlbpXYCH8Aodnei-V8HkPxWtc1XYNG2SMuPbpavbxb2QYRA9PNCI7IRRM+Zyz1nbO2cM+jppnT5hWiO0DGSFy6nzAUVaGDwMKY9MAAlWjqdaJzxwiulfK5V6rtX6uNea619rnXuvVf-DBoz9nxuTdCkfbqed0xMEADEJzeczBwBATz6rI2JozZmABCR38AMCw5-NzCC3vfd27h4JKhB9iWcB937-RmRnWsM+56nDotlNQFB7qpTUnCFDIpVFurDXyuZ8AtJnP5gaaC8di5LsKWi9kxgtIilZOusRUp+Xlylf3vA1Bpz03ve+9cnNzkMA7AHYAFV0gmmsqWYmanhhgAn-KbnumeBT-HhGGVWol9vhX+JNf21F-aeX9ZDf5gt874tgBefvE7Rn9XxTNiVnWC2aB-0Rw8pJJelv6GB-gP5v9G3O-vMnBkbv3qAezoPnEiPvAI7GKpPlFGBHaLPhoAvqfoftvlPrfCfl-jfPfiaNgVgWgefvvnPukNfp-oQRgffjWL-toleIATfhQd-tQU-nNrQW-hTEAQbiAWATwUzhAY5MPg7Lbl5o5A7lHubDmH7ubK7gwTptvt7ubGxDHjWDUJCGdFIaGDmBGF3lwRyLwfocKBAS3PxPAOplHiZGZmIQgBIdnDIeQXITwAoUwYoCBNnPgqLBxGvNQl6O7ngvjJCLetFJTETGXtHHTPhBBFQJjJ3PKJnO9hEHMroQYckQKEYekCYWYQgGFFYfADYUjNPrIcvk4RbMJuTPKFAgJp4WQVqL4bVP4UMEETgCETTOEYrJESYOQDERnB-oNgkXBo6LTB0V0XEYbnoSkeMQPrIGAP3L0HoFBuwKQJkGRDBFWsKjmMXNPiorQl2AwkwiwsjOIpLBiGAAInoEIvhEwAbjUhkoBPYAgNDrUjcYrFUmklqDcadoeH9Iou8dknYAAMQEQUqPFITkCnZiIgBhSAnja1Lsg-EvEgBvjWZQk0wYg5LwD2CfiNhNivFxIgkfGfFdLQmqJb5zr5IZje45jFHIx+aEl+JPG-FfG0m4l2CgnZLKK5TTikCFTMzIxB42aHr9hNBQAmhe5R4YD8khiClUD-KR4IDikCnQzSmJR2DrRVCJrbiAk4nAkslgmym5FRTBJRGdGhhalMmViJQZKSLSJWCUAhjkBCDGwQAABeMwOA84LxjJZpdShmXpXpnhEUQeLhQJvpTJDi3Uzi2cpYxhyYmR8AFhiExROYSMppIZg2M6qZNSAZYpLhKZqiBJGZbxeJ2SxRcohpQxJpnpBZiCzJIAVprwNph69pDxVZ3puZGZ-peppRwZLZNSYZTi6QRUJUao0ZlAsZ-SiZthbZvpAMU5hJWZcpQys5QM3ZXpsJRZVSQej+z+f+p6oRK8cQaJGJX42JlZXScJK5qZGSyIsgQ6UIbJ5gHJBU+xpYRpXRr5Bp8oJZiUkYsSJZhISUF0IA+ZPZepncaofARJLZFpus-Yt5ug95j5XJz5dkgh8A4+5J4hoYJY-5dgAAegRJBVWRFFebBZCPBfCUlMBT2SWYYKgXIVeueC-GvoRQWdBX2CCHBZEFUuyfBpydyRsShVATAfvBhdYVhTKXYKYARUuX4sRTBRxWRVxeCZRReSGSRQpXedxQ+bxU+TyaWCSUCJyWdBOdoRJSAAABoEUsUZkyVajplelUW+l8kKkHrCm2XVlB7KF5IFJ+6SEh76k2ScKnlMlPHB4iHwDNkgVwmOU9nRWqWXnrl+XhWlExVVk0xxV7molNBHlYnnjuWjTnk1nXmcUIU6VIWRl2QCFQHCHeaiUBVJXebSFmWqmTL5WVj2WpmERQikyIRtWFksmsBhXeYMkgXpLrmpVVlxV9XdiJXWUFk9hShBAyybrTWqIGKaIOZJQ1WiGLmXHBUFkYJYL6g4Lw5zCYbZirWKJyQKRKSvgsIcbIyW77hQDbXGVR7O64YdWjV9ajXtWXVfWdVtUA1MkRSRJcCjRpKWxeITUFleLqU3mKUjW1LKKvGIXcnFQFH7V0W6ajJx6qCsITa-atjBbxSk3ZJ54XYrak3xTXYAxZw1Lvm9rY1vgMU3qvw9GdL4hzUSWVl2AalAWqUZL2DPEw01kYkGjkWbraV5TlUY12T5Jb7YXgmOxLGtwC1w1ITC2akR6qILXSw0grXBXrVGI6JJSWIlDmDnXWKRV+KHXYLUinUvq-qo2yDyTwCKQpQXqIaEoxI+Ia12Ba3q2Ml618KYSG1dLG1aLA52Dm1DC8bVjjB7VdJ23HUO1e2wjx3xU5Su03We28zkC8a+1fWzIJGaSLI6Dz4SDNDIBg2wDMApQrI0ARgHZIBoA7KEjEhKCHL0DHKnIGAqAyYyiYSnG4TCL9DEwmCGXyBdARRpDTjCKOB3ELH5SegIgABUWovQ5A89dKVm04wpEY6QYYA01oa9F0sg3eN5DSgsxoxM9gE0+UhqsxSefxCWogvEk9J0M9K8CAIYvEogv9jgJgjkFAxkEUOgywYAsgvE04EozgkwCAjgKWSowivEA86kaQEUfAvEwIMATYWDvEVaIYzgUMu8zCISdcR9f2VDEF6k99w8AgjDGAYcHYEFbDFMVDdD8gDDggggGAfA9cXsW4mMYDeodYnA2QXhF9Bu5SjS4qzcsAKMbxQEmDISODmEJg54jgCAogRNGAIK7t1oj4l9sjN9BYEASjXgfQj+EU64aQIwMDEAcDEoXQCAoNugUjWouDmjjYSD7AA5ISGAEY7tCRMj19yS8j04AwsF44k404k4OQxMEDcQAZVA8yYTmJcjxoZSV8lj99XJT9GWssnAKT5gfxUApAWA6TYMxVilljsQegjgrskAsA396svQDYzQaDKj0IOjejBjYAoTYMhoQ1ohoJljyTptfxKAMz8yiy7cjdKgOAmyfABIIgIA89+UUgMg+yJINATwqgDYWgmSrA3AKg6g5A6QO27IGW6Qj9dA7AYACIBzRzAAAhGEExgOss85jIcxIEcostIjQCwA2OkKyPiEIPiEAA
******* Stage 3: Refactored -- Done?
https://flems.io/#0=N4IgtglgJlA2CmIBcB2ArAOhQFgDQgGd4EBjAF3imRACUB7BAUSgjLoCcMArAkfAkuwaxkAbQAMucQF18AMwgJeSUaAB2AQzCIkIDAAsyYEfhJ01FC9QA8LAG4ACaAF4AOoQBGAWiIb2JfXcHElgNAgI3Tx94PwD3AD5XNVcyazkOMETkshTrCDUABwBXMmDQ8MiCb19-fS984pyQBwLQknh9Bih4dkjGCx6HAE86IvYHGoCHCnYwDHmgsiGC+EqY2qC7DVgi1fcgzW012MDml3dJ06yU3IaSsrCIi+r1gJ8ij0gm6eW9wg+vpttrtIgkkjdUgQCho1A8Ks96mY1NETglrAB6KEw66pdHpWZZDH2eIgAC+uHUWh0IAAKr8NPoYlBuLxTOZLGRqOj0c5eXz+QLBULhSLRWLxcKkkiCKU6SsGUyHM4HHY1HRukr4g5gEkHMFzDKHBoyGR2AQlSq1d0MMbTQQANy6hxOrbjKDGjQW0TSR2wlV+CbEeDkSgASSgAA8LV4AIy+vVO6WlbpmdjG+AAOSpFoAFARcC06PmHAg1ABKTUOUROvV6ggYAgfGXsfIAcxzkkLBDLuBrtbAOYu0LUohCj2cAHJ9BBW-pYDPDBPpO4C-XGx5m22cwUiwWd+aANQl+Dlnt9usNpumrf7hxH0tlvvLv0Jv1JwOkMgAZSKrdb8BlCBzAtMg-H-UpnC1HUX2mMD4DIDAQiLACyEHEB7AwJZ5UZDQoC8JFQPyHp3DLDBwMYBBtAsAgACEhhpDRWyzbQ0LuJoywkaQMC2HZ4AtfYQHjWt3VAr0fT7IhPzDSNozjPtbTNDBzFDCgwC-INyBzUD2HAsshNJPtEwNUpGz-FCgLUABBE0zVzYtoAjCtIO1Pt2HgsZYQAeQ8LhgwQx4ZzUQcYL1aDa3CuECGY+AkCcGS+Q-PzpKjAB+Z1CA0igoCCWKBN7ELa3MEIIBIABrWL4EcZzJL8n8zMA8wc0qzC4LIR8CvJc8HG83zyAwUr4CGAg81ItyoCKdpgoi2scw0EgSALHinKg50CvCuaSGrdCPS8IIjx46Q7NEA673SkiMDc1o5vgHN0XcdFWwLCdXBel6QAnPSuvCtyyA8o15qE6bOrW7VSXa8LPr9AzkjfYyHH0GE4HgABpQbc0q5aXJgggAHdWCmJq7AwHHpwCCswtrEgwj4mMAGZYu5BwTxmLqIDkBw80y5KHHiZVxHJr7EvIOr-waoLmu08DENgZCZTQzD6RwvCCI0Ij2HO8jKOZ2ihgAYXKKKqTQ0zRbICySNEGqQygcMI2kSGga65qCjcuxmYAEXgOQNCKWBUIdiKfr+73YCIQHaz7KmiAcAAmFAGfRJmBC6kTPWVb1w7rLmbfihxY0zpmiZdyqPa9n2-ZzAPvvc9hYRDsOusj6mHFpgAOBOHCKAouqtrLbYtABZY19AwMANAjDtV2z-uvAcGMq9rZ3XdL73ff9gug9rhx6-gAum+j7BxA7qA6BxmHpt77nlSHsgR8gILL5zqMjxjAtU4wUtW1vvO54XvUl5LhYT2q8K5-wcJvOu2wG4wWhuFPsqcLQS1atxYEfEEoCQcGlb0DhYoKXrAoNQUAb4BAAoTFqOl4IoN4uDWsEDpjsF2PpJ0To6EUz1HYCA8AcaxRzMAPBYNKxdQHBOBW2EmT4XZKrNQPQJwFkFsItiogsKrEuNIWRq1prhWABozR4UrrtE6LAbo7BcE2XrPojoXRBgAB9rEOAnOpE48wMCyMFuFcwA0hhd1igjQhCBUZDDcQ4MG+VdF6nfp-b+vIHDiCCXqNKahfawDiTghwA53CXnqmbA0K4UnhXSSAX2K4HDvzHgUHMeYCwOUxgU+cmTTbmz4DosJLTWm6JNuZcw1k7SVLio5UJbTBlDJTBwdM0U8wYEOPAVcGB9wzIfGWRZNCIo0NJL6aGfAMqfgssoEA2AABsSAY60zJBSEAUzqD0CYCwNgnAeCbIIszagromY3P7sqfO4I1DcglL8v5-zflSjhhoAoKxCEADEZxjDQRzIQCACyS3gpjCmbMOYAEI4XwAwAoVs0LuxY2+gwLFOK8ViSYefcBRLsVQrcuYooBB9C8L7NAWKYTEUIVTkQBC0ABl6imay6a7KMCcsoVM3lLQdhplgAAfX5bBChHKPRcsmVSAsjMaSeXdp5PsyiBURSFSKhCyjxVFDUBAAAjrsPVeod4OHVZq7VUNIbQySD8gF7qPUAqBWoQ0YA6BuwAKoFFzJi+ykZkVOgQKUIwwblShtEA5H+MZxJ+njYm2eyaLRpsjCmvU2a7YgTAAUISLCiUEATTJDNXECAcDINKjgxi87KjkqmstFa7YNlrfW9gjaDzNvWb6V1PJPUjtHZKNQ74-Vu3dqfWEyocyhqqeGysFMo3TCLVmttiaX65spUodtp1M1xq3TmoS+bDrKhjSW1t+7t1z2rV2htgw+1zzPSejtNb2B1qfeMLw-akhrK+W6sdIGx3esNG5Kd8BIW4rciGstBZMW2wLCStytsI03oAqIJDObqWwYAg2VoJUbqofgMh3+6ygPDtAzRj14HShdxEvAK58BLJgAgrChDe6yORgLBjFdpb904Y7VoDjSCFVUMYcwv0qKyEkxKvoJU0S6bkztYnZmxEYKUFYO8vOLa9TQ0AzDYDtHTOAonXDRj6YWPRXg0oRDRLyP8echTeNwmuJTMQUTIVPEpN+idLJ5q8mpgJRU9qNTTMBjqy0283OnyoYAcHd86jZnUuinow4FjzBWAcAtKqdUaCoIsJrrCCmHCuE8O0Xg4JmM+wFOxRkCRFgpHET4EItCoEPAIFySDApppilBL69lEAZ4QZ6iGwNkAABiEi4rpoTaae4aKs3BsdeG4s-KQS8EXTLaPEFFTMUOYQOhys1YxutL6+rRb522kLYLNooq84yo8MxpijA0r4ARmHN0KAFoMVUo+19xGlBglHaxYD77IO0ruF2s0XKIADwrZuxdtbxThNKeVNpsgts8lDIimlApijlHOAoBGMg0hLYQAAF6rFpsua7ePGcRTYUz1nvmYrcZtOxubrO8ceMGt4wulYrMUBY2x1C23F3cac3YZZvOhlg1x6z2Kb3RNK80aN+X43UdNPRwlLHOPkfy4J6xQoJQlG-BJ598nPWtd45Z3btp7OVdUrFeru3-OvEFAqlVLUIvmNEvGZLrjwm+Oy-d7zxXRvecu4QCq7QEeIY88Z3dxPEUClYjUBgEq5hikPYnU98qHNMYG9zqXqMCV0dpVjKk9H5J0p3RG8n3n6OtTiGaY7+JaTjbDmz0iPPDhHslSL5XSsUGg2zTMTt+z0vl31-cAAPRIh3zvsUM+95z8kRbzQked7zY5mS1gjRT9DR-E8X9FMZpX47k3Q4YR99z00-PxVnvF7H-6+AM6z6T7tNPgCYOTt58QA7Bl809dE18e979N9Jt0pNc9918oD+8n9B8C9h8XtKxg8lBCMnsbpQ9f5Qd0oAANZfa-VnOXMg5vIZN7CHYHX7MA2sNKN7UjesMpCpUjFDGlHjRyQRaPIZS7PDaFW3PffJHXOA4Q7XdwMgdbSgrXO7beTg+PeAMQ8QuQhArPaA5AofV-SqSsSDD-GDaFH-RSKXPA0jQAuREAWHRZeg6acgrXUiJEKmVCGw9PDrTgUjAbXgvHBbZQ4QnwmQ+XVPLwlPHMOUGIJWe7FwtpCxQxYxeHAwuDKZIQ8QzRAhIhY0EhAgUxX-NI3WOgItKNHZAIvfZSVSdST8HhdlTGEFMFKABI3AolBFVqOwlI2BFI2sFox3To+XbopnXooZWKRJWAWAaaOJe2QWUbeRSA9QpAuRc7bRFJLQovHQlzXHTAgjYoBlXhI0djWKTsOVdwFKI44pVoMYbYWVKkeHI4lKAgYpZg2Kb0MGAuXRcvC0dY+sSJS-V9FJUkUg2sefc7dwRHJvKY9wDwK7Xw-sNCDwEoNgLfe7FAl-ZY33FoIw+sUNCsIAr8DQN2EiPsdqUkIzTZXuHZagGMGMeOFAcQU5SkbQagFkB5dkJ5XQd8RGIaL0PsbRFlOeY5BFX4WKCcOQdROVCcNk+GUYIgCcUHTkuKWKbANAfZPklYAUoUgsEUsUl2IsUqIYKU4GLRWU2OFAJUjnCcAgYUy4+xMUlsAIGYXU8VLkqAWKAAThjmNJVPNO0AFLFNvg4AsHMDtJlO5NbidLdPsVVIcHVMISGGmFnSIEIQDLUBTQy0uFzFTlXFNGWidHfgUD9h6BzAry1AjEUOz0IU+08jkDzAzJ5j5jsL23KQLO6h8j8htHCECnzIRP3FiiLKmRLO6AjHLMrPYB7GPDUFimbDPzUAvxq0hmTNeH0EsijPNGVGbErEuFmkXPTKHKS3fF7gXKgGjMvVakrHKXcD3OjL2nlSlkNUUNOiCAvINSVUoWUVvJ32aCPAfNAmVWgBnLUDXRoE8gABlGAvwOS-QWduSYxeT5Jdi55xVP1v0e0ehYpX4+wDiQAaJeJkj5D8MsiqwuoHTkLeSIyLT3AAApL2OQE4yVc4tC8iuQOQW4ppXVexEgdRU1C1K1ehXYaUgqAinkgsYiz09KAeWEqis4mVNCkSk0YpZiicVigsdiy1DnU0bitovUZ8AzAZcCx0hweUxUjvUTWKVuOCx9RCkxWOcVNCmgSgLC+4vC3ig0p01uI0wSjndway4bPcaiiSki2gSgRi0MicHGNis1JS2KW1NShwDSni0KZlHSkM6CsgIykyr9btOIluSy3ygAcTchPFss4NwrO2mj4pjmMtcvhxyvgDyqaVOKlQuKEvcEqpPACp+GVPShxmKUUs4oiqfCdGhh9FWiHTS2GpFCSDmD9VNVQhPhICKCogQg8HVCGARJdE4W4Tf2cgHCyxuQ4DmMZwd0GVDVin-KAq-GKOmlyPyNaHgh2THLnLPNuK8Kjyj0ZKLUUB6GQCGNgH4EylJN0GwHpjQBpPOSpHpJIHCEZIGCsF0FEXCPERVjVgJRKQgChFCCGFinyHnGkS8C6zoDKl9HRAACo9RRgyBMaOca15xfsYwCgowxp7QCa7o1AXUs8OkxZzQKYPA5pSpWwhBTUdKpt6K5AhIWAUaNA0bt4EAIwhI5BJavAWA3JyALJYozAdgwA1AhJ5wZQfAlgEAvBmK1RpEhIx4dJ8g9ihJoQYA2wzanQFqIwfAEYT41r29aYaaHBW5Xb28dJObJ5JBfaMAY4ex28g655XavaNAfapApAMBxBW4A59xWAlajQNwGAShd4AMvl6lOkfVO4RiKZjbWxTaYlzbcIWBJyvAEA5AkqYkMA0B4AwB7RXxmbM62aSwIBEaZqzQOBYodx8gZgNbkayBtahgEBBjzA06-QLbS7Ww9a6Bvdq6Yw6706YZm7sls75wJhe9pxZx5xZxSgKYVau7wFKBKNl7WbV7zQ6lH5EbOayoebRhCEJEZZzKpsoASAnST6khM8H9StEwxhP1u66Be6ehpb2QvBvZIBYBxa8ixhOF2AjawJ8hy6vYq7xAa7F6mavlTQBC4MpD26GBD6psUAiH1liSfqDRqBaZDkYxW4yRZAQBMbSplBVBga6TdAvh9AWwTBCl2ARBdBDAyACgsjuRTUChubEJ8j0R2HOGAABGMDAOR-ZSR1gDhxQBk-AZRagAQFsAoTkUkaQUkIAA
******* Stage 4: UI Refinements
https://flems.io/#0=N4IgtglgJlA2CmIBcB2ArAOgCwGYA0IAzvAgMYAu8UyIASgPYICiUE59AThgFaEgGFSHRrGQBtAAx4JAXQIAzCAj5IxoAHYBDMIiQgMAC3JhRBUvXWVLNADysAbgAJoAXgA6RAEYBaYpo6kBh6OpLCahITuXr7w-oEeAHxu6m7kNvKcYEkp5Kk2EOoADgCu5CFhEVGEPn4BBt4FJbkgjoVhpPAGjFDwHFFMlr2OAJ70xRyOtYGOlBxgGAvB5MOF8FWxdcH2mrDFax7BWjrrcUEtrh5TZ9mpeY2l5eGRlzUbgb7FnpDNMyv7RJ9vlsdnsoolkrc0oRCpp1I9Ki8GuZ1DFTokbAB6aGwm5pDEZObZTEOBIgAC+eA02l0IAAKn9NAZYlAeHwzBYrOQaBiMS4+fyBYKhcKRaKxeKJSLksjCGV6atGczHC5HPZ1PQesqEo5gMlHCELLLHJpyOQOIRlar1T0MCazYQANx6xzO7YTKAmzSWsQyJ1w1X+SYkeAUKgASSgAA9Ld4AIx+-XOmVlHrmDgm+AAOWploAFIQ8K16AXHAh1ABKLWOMTO-X6wgYQifWUcAoAc1zUiLhHLeFrdbAucuMPUYlCTxcAHIDBA2wZYLOjJOZB5Cw2m54W+3c4Vi4XdxaANSl+AV3v9+uN5tm7cHxzHsvl-sr-2J-3JoNkcgAZWKbbb8CyhAFiWuQ-gAWULjarqr4zOB8DkBgoTFoB5BDiADgYMsCpMpoUDeMiYEFL0HjlhgEFMAgOiWIQABCwy0pobbZjo6H3M05aSDIGDbLs8CWgcIAJnWHpgd6vr9sQX7hlGMbxv2drmhgFhhpQYDfsGFC5mBHAQeWwlkv2SaGmUTb-qhwHqAAgqa5p5iW0CRpWUE6v2HAIeMcIAPKeNwIaIU8s7qEOsH6jBdYRfChAsfASDOLJ-Kfv5MnRgA-C6RCaZQUDBHFgl9qFdYWKEECkAA1nF8BOC5Un+b+5lARYuZVVh8HkE+hUUhejg+X5FAYGV8DDIQ+Zke5UDFB0IWRXWuaaKQpCFrxznQS6hURfNpA1hhnreMEx68TI9liId94ZaRGDuW083wLmGIeBibaFpObiva9ICTvp3URe55CecaC3CTNXXrTqZIdRFX3+oZKTviZjgGLCcDwAA0kNeZVStrmwYQADubDTM19gYLjM6BJW4V1qQ4T8bGOBxTyjinrM3UQPIjj5llKWOAkKoSBT31JRQ9UAY1wUtTpEFIbAKGyuhWEMrh+GEZoxEcBdFFUczdHDAAwhU0XUuhZmi+QlmkWItWhlAEaRjIUPA91LWFO59jMwAIvA8iaMUsBoQ7kW-f93uwMQQN1v21PEI4ABMKAMxiTOCN1oleiqPrh-WXM2wljhxpnTPEy7VUe17Pt+7mAc-R5HBwiHYfdZHNOODgAAcCeOMUhTdVb2W25aACyJoGBgYCaJGnZrtn-feI4sZV3Wzuu6X3u+-7BdB7Xjj1-ABdN9HWASB3UD0LjsMzb33MqkP5Aj5AwWXzn0bHrGhapxgZZtrfedzwv+pLyXSwntV4Vz-o4TedcdgN1gjDCK-ZU6Wglm1HiIJ+KJUEo4dKPpHBxUUg2RQ6goA30CIBImrVdIIRQXxCGdYIEzA4HsAyzpnR0MpvqewEB4C4zirmYAeDwZVm6oOScCscLMgIhyVW6heiTkLILYR7ExDYTWFcGQsi1ozQisADRmiIrXQ6F0WAPQOC4Nsg2fRnRuhDAAD7WMcJODSpwFgYFkYLCKFhBrDC7nFRGhCEBo2GG4xw4MCq6P1O-T+38+SOAkEE-U6V1C+1gHEnBjhBweCvA1M2hpVwpIiukkAvtVyOHfmPQouZ8yFkcljApC5Mmm3NvwHRYSWmtN0SbCyFgbL2kqfFJyoS2mDKGamTgGYYr5gwEceAa4MAHhmY+csiyaGRRoWSP0MN+CZS-JZFQIAsAADYkAxxwOSSkIApk0AYMwVg7AuC8E2YRZmNA3RMxuf3FU+cITqB5JKX5fz-m-OlPDTQhRViEIAGKznGGgjmwgECFklghLGlM2YcwAIRwvgBgRQbZoU9mxj9RgWKcV4vEkw8+4CiXYqhe5cxxRCAGF4f2aAcUwmIsQqnYgiFoADP1FM1lM12UYE5ZQqZvLWi7HTLAAA+vyuCFCOWei5bMyVOxZU5lsfKqWIrEJiv7MogVkUhU6tEdM-sxR1AQAAI57ENfqHejhGa0i8u7LyzpwbrK+T8gFPrfUAqBeoI05gwBNHgAABXaJYoxQwVSYqrCi9muZMWTJzAAMlTZShAKadAf1PF-AwPMYkC1gnQ5NUzyVvn1Ki3MGKqUktpY4TVyb62AVzeofNyo+bFurn9LegkK06LoTufwxAwyWCTVS7Q5BCyxn5oWiQmDM3EppYBLiKrxhqqmak5tK7CBrqmcsmal14AWLuq9Qgh5Xq5gwAAKgACQYjkSAUiyQ1let5H6z9X6pTqA-DCcggQrlZmpBaWNRLQPQRYeB7FnAmDzUZXGlybDaFUq3WBrNW7NXBtDRGm6hjjEToQAHD1LCa5wkxY6V977v00dowGo0YB6BuwAKqFDzBRqpUZkXOgQGUYwbH0Orscj-WMEl-QUbEMJ2eonLQSccmJ-UcmoxHRVPx4SUHlCSdktJ7ihBODkGlZwYxecVTyXE+BrTdtGz6cMxwYzh5TPrL9Mkb1tG3O+vo2URjbt3anzhCqQjgFONOXjTxhCMwQ2yYs8Jl+Cml17pi3PFT8XLNxaU3bUCIb1Pmc04l0T1mOAGaM0MBzc9hLpd0zZ4rExvCOdfc575H73PNb+Z58B8BvPwEhbi9y7HwOFkxbbQsLbbbcZy6uwbynqU9dbdCBcU0RtRhnVDGGLmmstY22KNrXdRLwCA1ZMAkFYX9aXUNwuY3FMWcm1ZqdiDiZCt4ow5h-pq0tVJqVAtiU6YU0dYnZmJFYJUDYO8vOZn9QwzfbDVzm2YdCm24UXbQGYp9eUANolZ3MahfG3u673E0OF3IVLR7u9ntVsTW9smn3onfZ1L9pmgx1aA7ebnT50N6vUdh5zgUbWgMsDYJwS0aoNRoMg+JsjBLVScO4RzbReDglY37AUmDcwJGWCkSRfgQj0JgU8AgXJoMClmmKUEw3OUQDnlBvqU3xuQAAGJSLipmtbppHgYoO5N9rs3iyCpBLwZdaDZSKmYrRwgUbVYayW9aYb9WLvI9tOd4WbRxV5sVQ5ljZN0r4CRhHD0KAlpa1Zsz9npGVBgkh6xUXnPpf0oeHsLlDKSRzeO6GQOT3xTrudpVED8gts8kt4iulApijlEuESWATwvQZBiHvi4UT0-x4uBwBIWQxu4-97Cch9f6-idxWTVO5vW+hkeKGt4wuVYdsZn24duaZj-eo9O0t87ffD91nBs-9fu-J2HffzNC3L+rdt5NId6JTd695r4v6D5sRFClBKJ-AuCUCRjkAria7gH-5hQ-7-4WL4a9BxTYalDhqRrYEcCBZ-5oEt475LrZpmqoFkGODH5eKFCVTVTagX6UBI5Gx+4cYP6RiFiYwYFb5v40Ef6UFTL8F1ikEv4J5iH5LGwjgYClQWDFJJ6-op48JYygG5waHRiJQd7pRxjbro6yQUgZT3RN7SGByGHRjagLrmEzSQHDiwjyHIhKF0EqGlSp6VxVidasY372h35BbcGVjGEeAAB6pEzStBqSBS2I6gThihLuLQ7uQhLSHeNgxot+FGbaHa0mERtB9hRAchChKQTSyhJU5UahXhTG8AvmZ8vhSkXB12QRT6de5uuRZBcU0RhRzhCRGUEhZBnRjhRRLhye7hFRLknB0Gc2pUt012y2ZeGUAAGuEW0VvoeqsQfi3hnlnlXnnrYYujujNg2IHrmC2sNiumHi5HsTIR4GaNNtCvrpEZFM7n0Y8c8RsWgQntvCulQS8ZEZ8QMbEUMSUa4WUanlVFWO5J1t1tCnUQ2A0ZYWcTNmHsESAHtObmsWQRiS-mRMiNTGhFca3jcVwC2qvo8dcSAOQF7u8f-m8QSeSZSQ8WSTIfKLEErInnSWElgVYiYhlNCb1qISgUybogQkQiaCQoQKYn4SKbrPQCGrxjstSY8SpGpBpF+DwuyljCCmClAHyTMUSgim1FiWSbAkKfqEaWgeaYfpaf3taYMnFIkrALADNHEvbILBbvIrIYMd0XIpHtoikiMeUWfkhn3hMcoLMvSoyrLodnFF2HKvlF8YcXFD6IWJXiXlAHFGaHsCRqgVoZaKGa2pEgWtJgXMDCsa-j6S0h4JemYQbuhJ4DHr8QAR4J4KUOwMUYniCaoUGdqOUv+oBkSjFCNPmT2E0RlN+JoG7C+rBB1GSJDpsr3DsjQLGLGEgPsigKclSDoDQKyA8hyE8noB+EjMNN6P2NoiynPMcgin8HFJOPIOonKpOEeQjGMMQJOGXqefFHFFgGgPsleasDeXeYWA+U+S7MWGVMMG+SDFop+bHCgH+bFPYoQPedSDeU+a2IELMJBeKmeemY4AAJwxzwUAXIU6CoWELDAzBdC1xtlYUfnnmtx4VEX2KAWODAXkUzB+bECEK0WwQ4VxSvy-D-nMUkUIWPnsX4zfwMqcJGLGiEKTC4xGY8XQXnmEWCWiUsVsVQAUUTrkBlTljqJtAboyqaXHk6V6WTgwxiZtZXB5ipxrhmgrTOjvyKB+y9C5jaHaiRhUHyGEJZ5eTyD5gOU8xdrdSjwgruVVi9T+S2gRBBTuUdkHhxReVTI+U9CRj+WBUcC9gnjqBxQthZHfzgxQzWVvAGBWTkWgaTBmhVhXBzQVX2VZUNYfi9zlVaWgRtRVjlIeCtUUX7RaqUImpbrHjBB9XGpKqULKJnQjUtDHhjVgTKrQDFXqC8aOC0BeQAAyTA34J5-oyG55sYl5Ck0Zc84qemhWtmxi-F4qcZIAtEfEjJ9qu6SZ3UfFF5+ArFKFGUAAUl7PIMUoZVKuqqRd9b9YQMUgavYqQOohataravQnsO+YVK9QdYWB9cDR4APK2f9aqsZZ9RjVjU0hDZOFDYWDDTaghZmfxCafqC+ODgMntbhd+b+REVOnFK3KdVVnZjgbHNdXjXQFQA9QmXis9UjTBXha3HBWjQhR4LQALU0gDZunzbLVAGDYTdefYrjNDZauTXFA6tTY4LTYjegbBOeYxUdeQGzRzeddVnFPgP2DdQAOLuSniC0toSnVgvUwUxzs1S15QgBO3wAu3y041A3S3+3O2Brg3q0eC4zFJk1w163PjurJC+hrRrZc4Z3uDqDzCMYWpoQnykDFDUSISeAajDAdmuhS5jHaiDi843KcAVkt6b6DIUZxRrWbXfiKmaLSmyltAIQ7J5WlU9Vg1CGCGCG7khpKC9DIAOmwACBZSLl6DxwoASAbnnLUjbmkARC7mDDWB6CmqKh4Sq5ETSITCUysBzaaDDBxQFALjSLeC670DlR+gYg3r6hjDkB30IV6YLh56xiFDRjjQOg3r3TqCraxEdJiwWiUyeDzRlRtjCAWq4W27yCoPCQX3XTX3bwICRjCTyA4PeCsDuQUCWS4GMBF3qDCQLiyi+DLAIDeAQ3qjSLCRjy6QFAxnCQwgwDtgcPOil2Ri+CIwnzS4Lo4AAOOCtziMLq6SwOTxSDyMYAxy9gLoqNzziMyOaByPSDSAYASCtwBwHhsCkPGibjkOUCeqwz1KdKBqdxOmUysNtjsMxKcN4SsDtreAIDyAW0xIYBoAdYOhvjgNWNQOlgQAS6F3micBxS7gFCzBUMQA0OyjDAID2kWAk7+hcNuNtgMP0CME+OxgdZUaWOQPZI2MLiTByEzhzgLhzhlCUzmAyw8lANFPJDBOlMWh1KPwS6wPlQINjCEISKNNxS25QCkB4UWPJAxFxFwj1PjBnXRP0CxO9B4McjeDeyQCwBYMynjCcIcAsPgQFAeNezeMSC+OFNgNfK3EtozB571OMBROOC24oDPPrLzkL2Gg0A4CHKxitzkhyAgB31lQqBqDr1bl6DfAGCtimCFIcCiB6BGDkCFASk8gWqFDwNISykYgQtQsAACsYGA+L+yWLbAkLSgO5BAyiNAggrYhQXIZIMgZIQAA
***** Creatures in Unitards autocomplete

https://flems.io/#0=N4IgtglgJlA2CmIBcA2ArAOgBwBYA0IAZhAgM7IDaoAdgIZiJIgAqAngA7y0AWXUGAK3IEAxgHtqAF3hTkIAPQAqZStVr1GjQB1qAAkU79utpx59DBvYt0BBZswBKAZSQW3krZPGwEIyRAldAB4bACdQ2lYkXVD4AEcAVwhYqAA+aMleXVpwyN0Ad3gAch9dACN4XVIuUJFuCGoAc3liWGlQhsb3Twk62ibKoIAxBOo-AOpo2MTk+DTowlHxwMkxXXgAD3gRBOldFazq32kofbKBbY8rTxvryV1dMFp2EbHPYaX-CWixdi+6WDpXSLMb-YFiUKPZ7sTq6TKVbzHCa6BqrYwcLi8WhQAC0sWxrHBoSeV30N1W50uNkkkkhQSctM6Pz+E1ogOi2RpHTKu0qdAYRKqNTqnTwuig8EItASbVIcLWWhA-Pgiu6knYsFoIng3DEsAldIZHSazP+bKBDXYu2BEHg+t0Gq1Or1Brhm1JBg8kieGwc8FIMskcqCAEkpKbWeyoRsIGAEmBdNR4xVIWJCLoAG4QUgQMoIGL+wOkMUSqVF+VwrIyfyxG1teApXSwbMeiy6ACqThsAHEAKKuKy6W5kr1gAAUJkxfDFwDVnkRlwm0TArDCEVYeDnqzG3H6jXg0SOlxD0jArxEm7u5KeLyWy+eAGExGANZsAPKUvxh1ZOWOvj8XH456XiO5JiJ+kjUrSCwkO0b7UMw9SkFB3K8iBnrko62q6vqDYZO6YZWpIAAKmrYS6DbMO66Hkp4Pp+gGsqHrq+QAHJiAAshC8CIf0iHZqxyYNmqAC+ACUbiDkMvZ2O2Di9i4kmgZIgBEBLoYakJI-SSLAhLVDkdT+tk1CnLEkgJKE1ByrECAZtpZyAUGVQQicuhjiItDVDiDTVFZED+BmdqsGJ5RRFuACMGDrBsWr3CSdRbgATFFFSND5BT+dwQoGdwVEbK2XqeAAzFF4hSLQ6X6bUuXUc5oSuWy7C7hU-geT4rBKRhqnGBEgWhNUBaMU5CQ5k0jxiCNlQQroCTsPIUBiPkeg5KEi26AA1vArCkGqakcbQm3ZEKSKBGUhIiM2IjrbC02SBwsLVg28hmRZ1C7boD4IDk2XVcZpnwGAYiBeCOxymdcL3WN-oiJ1mhw-DGjyDoADcY4gss1BjvkDQLfkYpgGJs56LoZWacCmqSE+PiLoEAC8nK0nKtOpEOxMPLQXKkBgN7noYDz8wA-Az-UYAuGPc88Y4c4zEu3mMEls-z0TSyLYv-DofOk-cVV1Ax5b02OOs1flYoq6QIXM7oRP8yi6ZjgAhEbeWSCFL2WboFAALoa4rWsOVSXK6PTZsYOBjkoboAA+ke6EUypFHzDx+7Ai0Ng+nnwE4wpZfTTvuhgqwADKp6E6fVGOCuJyTEhk2ysB67KQfkxzVMnZjZtiRgrTtGOYeXEHLPWzbttufbfd+BQ4+QVynuu-A5nu1KsDVFXDxu3oU+TxBKGewXYjF4UpcZxXGA4++hBjinh9l5n2chSzOLhVX4lVxgpAuWOUtimUFuD6vmbfVoAANTZE3WgW9w4zz3gfNOx8xLfxAbAJuZQIEB1pLvIuJcb4Vx9sPEeUtEFB1pvTK+sDqhZxynPBeehH7-wgHbMohDiEkKwRnCh1UqGvV0E-N6isHj0LcsAtkp8TLn0vqw8hd9gjlEQSIiUGw3wX1IUfSRlDOHu1oXw-BQjYByLEcom+7C6j3xkcIs+CilESNvmogs1DuG4OHgIghoCgimNgOomhPC8FOJ0boFmjC2QePsbwvB69dAAAZn6V0VmEuuDcgxv0uvAMc4TTacwlr6Qsjdo7ZB8PErmCAmiZAVg8ESDwHHozBB5MYdojHcDHD5LSNSxQZmoGICUIUh78Ksk07Ub9s7OybkUBOitWntPgBgBaYAMCJAbKwLOxwIRjiKJaXYRRO55gsjg4mIkKmfGREePw8SxxjIlGKQ5-wxSNP6NqTpVdTkTJDr0XcAxDZ2hptQEp-NqnalgHUhpPSbnwBaW0jpfNdkhOBPswILy4DwAANJbQACKLUxtc5pmZQXAvWHc0Z31YhDSZj9XWWSgwAs0kC-pOVnYgvGRgDuDiHikGxl4LKY4Jn5HqMYq2-8PIDRwOEgceCHgTPYLEQKUgkWSmlG0bZwqUSApqf044cwwzyIANTqv-vwu26K+kXNVaIjYRD6YEqLBgQpjRikKopUqg1UA1WbCbpErRDwyj4nWoy75GddBFSwEK4VorxXVilWWWVXzvGKv1e8vwhr5E4hxNq-BeqJn2sdca5huhH4hRTcqy4canWmtJQUmQVqso4mCfK91XBPWQptnyyo4UioBu8bqqNqaY0nHTX4rN4VcXyqZZ245DyxRmtlBQXNaajWeyue2iNw8IVVo9V6pOPrEoAHYW3Dx+bU7O5LenYoefOxdugIWaxrvcScZhsRNweQPHlvsL3CyJQ8+lnMvV+xTU3Lp-Mp3yOiI-ECw8875WiMM5+Xqwk-oeFmeA+RohjmAGbcS97xxFALhiHE16oAjPlfjZZqzJAUDupwWm0h8qe1wwOmcSabZQGzLQPMcxoj2xDmrCYFrS2ZCAwOh0ZFnS4VCMrdJWEBOuhyUUOpRQeMDrsrABIB4bUHqpdVGltH+YSEI8uDALLuAoWWXJhT0m3IZl-g+3jNtJ2doLRm3t6nLPtpU3UQZ9MMz2dPfA9zEhNqsFxpMXQsKECItYCipaGAyg4zHEmHws7bXalpWC11-MT14PnTbfD6Gx1Bio3h4l3B8n7spSByQaTGadxvJ-LLVyoAbDM2hjAWWcvUfMxZpOmpSCkGiFZlVDqjUmpRDV3QQsij2qKLoMD0n3MPAkIDSaj0hNuTM8AJTRXrO9fkU3aAxqRIyd470S661DxDtJeFyL0XYAJexVVlbNS0vCpS81rLFAnnb0DhJ+O3sksPDEnd77-9j3gr5tjEyi0MBXqxKcem4PzDUHEljHGi18ZiWRj7EAO2aD0EYCABkHMJlCBAKICQ0hZBMD9lxCUSD6ZE08P0WMbJOsew1l6ZbypoiKhsDkKAdlQiepAKey85IWeY7ZyAAAQjKWAhBVpdD5ztpnnghcMBF+nBgsBFT8-l5IRXinFRIs6GIdXcu3rM8TMLocIBexxkNwLk3rPzdDBTqMA01vNfa5F92EgtBdBcR6cJWXNuFem6V+bgAEnMfcuoZca+N4Hu3ioQwVA2C7mPWug867F-0ej4gxAeH967tPIubCwDKBzVaHXk+C4L+bh89QdwkE1BX23ZvFTdl+LwUIjfY-N5ACGRoCR+i0E76nuPIB4ViDZIPvPKe3fm4AJoHSHzPxUAB1Z8Jfc-R8ryPoBgYLIqin1v7vDJx8b6N4f4PipmDPGSIvqvipiKZ8n5vpvF+QB+lOA-kyT+z8v-TwAKTtF0mIFIG4ENyZxnSZ0BlgwZwoHz2gGiFSUeHnloGiGW38B0nT2ImNG1A610FFw6DOWMF4EN2f0D3gO4XxmQNQLhH8gQBFycA8lCClG1BIJ-zIKgGiESkoK0moPQLoPN3gl0Fb1wj0GIgkCgFYID1T3IKKm4JQKthoIwJFzD2oFCCiF0DEPqgiH8n2HTC9yzg6FAXhXrz91PVIOkI4N0HwCQJ4IUL4PT2YDEEJGPzUMkLgMsLQDkN4NoPTxDHCHgD6hzCYzcOnwG2iBQC8LsJ8ML3qhbDFEQn3zMLYIsOiHXUiLQOiND3rzlBD1oGBl7FYCMi4KIMSLKWSOW3IKwHSMUP4MVH2igGoH9DlDTF0GMLGm7HgAhH3HiOINl3MIqMsIAE5qj7DldqwIBOAJRWDwCbcdh-CpAbBqA6dYBohztZiLJYgpAuJYNViJcgMLlFjljlYlinhKc-5JByc7RRYNjqxDjTiwETjQEjdB1jhtjbRlwgZbR71ZwLjxldE5jNjfjYMm5LjdEoDbQuZiATIpY3jKhLZaBYTT5IdiFxpYMkSQpnjUTbR9o5YRAPjgTLZEMwisSJloAxQ7dwSJkGAtIC4fCPMdARI0c8AMcGA5BBBhAQAypidJA5A-ZRcxBbMh5YN4M3IkNOYUNLYq56sygBTJstE0MIBjM2M9Q25ZYpZ71aAMBlQo4Y5NTqTNT7DO4BAxAGhlkxR1lPN5TlluAipjNJM1swNdB1UHgxxQTnt0kATqxPYhtvc-j3SZZPSpBd5tSck3S2MbigzuZkDaSMDxtY42lGiLTdtHgJwMRsMaMkt2Nvhn1RYVSPlkzpsdw9xFMnkiyBgCy+MnQcIDRhMZZRNqyGwKyeY7wczmyxgmzaBMlCVayRZ6Ji1-4X5FYFYz0xgn0bB2B2Bv0mdhSEMltNcwk0MABiaEOUvBccfkjYDM+VLM-zUE+lR45eCswMyQMDY8u4tkVc4VZ5Ys6IPcg4g8is+siiBbe0nKWwA80gJrUpS0tcscDcrc4VHc28v47mT4-0I8iMk82OY82Ey8vBa8gYYCinPNPwWEjs3EpCq4yknE4CJNPs7s2ONAOC4eJ8wTMDOpX06Ar8+klPSuSQCFEc6ZWbKQMcBaHYBgKQcLdpDcWwCcsSAnTk58GEBAUIOQEvCoWAJklkrHUWDrASrk6sOQawZbGUjYHEHMAALyZHKAhANBxFUtPR9i4uNSHnYDEBzH+CmDtA5ggEChR2JieFCDSn83CWyF2DEHsoeB9BxGxigEyGiAFXCXYA2E8odGxHoxNG4SCpCr5nI0kCw2bEaH821CkGElhyMoMudOMoUMcucpxFWHYGiDQGisMt4Qw04CwwhwULMosqXALAplssqBHPKvgEqr4AVSIhaxqv8jqpshsrsr5no1IEdHULzDECulCt8v8pJjZBEDHHCnCXCQAFIs1dAsBgrkc+ZcqGgArgq3LVhQrCAid1KIANLFNwp1qYriY4qEqIAkrogUr2hQqZTQgayIlnqtR1pGhVondohFz4AAbAb7Lmqss5RTLzKerszGN355NpBJroBpqFrlrQqCrogkalrQqNLvIjU0bgajKssuqIbLL6r+r4BQr2BwrtKFrgqPqrpvqJoTI-rBjmaWb4a-LuAHrZr5rFqVqK1LrNriYEBCAoKcAabz0U4FtOV-IybYqIg-JiaS86afqTIIkMBEpSBQq5j34FszLUQGw8ayqssULXIVLPr6bfrdBFybAsAbBRchghhSq0cZ0QBmxqB1pyAkAqAlRMc5BIBMgOhJKCALJJKmBuAaR2BOt5B5BRh2AvrcywB5A-buAA6AABSKSKFAROzKAO9kgSkjLHfHEST2ESIAA
***** Autocompletion with Manuel

https://gitlab.com/JAForbes/manuel

const searchAutocomplete = manuel({
    hyperscript: m,

    get: key => {
        // query here when (key == 'list' && input length is long enough)
    },

    set: (key, value) => {
        // when (key == 'chosen' && value != null), <value> was selected from the autocomplete dropdown
    }
});

...then where
******* Flems noodling
https://flems.io/#0=N4IgtglgJlA2CmIBcB2ADAOgGwCYA0IAzvAgMYAu8UyIGphhIBAZhAo0gNqgB2AhmERJaAC3JhYTEKQD2PSvJogAvnl4ChtAFaMCs+fEXCAbnwBOAAj4UIx+BYC8F5n1jEA3AB0e3-YXIWAA4yWjKOFsDeFtExEDyBAK7kSBYA5Kl4UTHRIhAA5iKw+WIp6Zk82dFF-imcWZVpAEJ8-PwWgDwbgDL7GfWVqQDCIvBmZgCeHYBK+z0VDWkA6nyUZoKwch2AkvvTs2kA0hAA7hAWgHwbgLq7W7OpAMrkZnz7AEbDYx2AyvsXDakACvDWQ4QdQCK+x8+gBBQKBBCpXrRAC65QaMkChhSLjc8ARlVIIhkxB4KR4CVgsF6ym8vjk-isSRksjAkPglHCYBaCRIAApIjMcqNkWZCKQzBBAskLGByr08oyUgBreDjBwAPiCIRknDlo3h5O5FmIovZGrwFlMsDZAEpHMqudtgqF1fLYeETWzSd5lGbtX4AuQZHk8ghwuz4MYLUqIlkstZyLZ7E4AIRRmNeGZZBABEgBJxQWkJQTyDBS8gAUQQefIjVGAEkoOzPERfmZsXWzcnolkMxh-KMEBhDlByCJwom7BYAPwWOsARjQaAApHWLCk63O68myT4eGAMGYZEl4BhAmZ4KwAB7s1IAYlSHs3293lHZ2dIucM5AwDxkUFGRrrAHo60a1oxH+dYpEBDTGBA8D7KiCQ8DYcjsha4HbBYR7kAkZgVGAtYgFAtidg22IXsQ5hNkwFh1DqqFtuIuHMDIywAZRMI0TEOF1oQgQtIRZEiAAtBA+jMcAFhyKQRSkDKKQ+n6AbuuUv4AFRsbMHEgHEiRvqRjYCZpSScOQvLwA4OnYrCnD8IIplESIFmQtY8A4rAUDDA4RYGJYZmDksW4YBgsIAUp-7Uap2R8DSdIMg+KFhXFsTxEkpT6eQ0KhfFql4LkBRFAUoqpNlhTFKlrEZWxeBIiiaSVTwaVlRleDYriVWpE1eJ1fVcV4NU+U9R19XuspZrBZiGXqSlvG6fxhAJA8kDkIZxmmbN82BSAN4ZbCG1sVtrazOu2SqG6ZoqGoIBWZodAMFI+gKOQNAAAIMfI-EuKQ9hcp45DPeQr0CGwozJXSMhyKkyZfYQjZIJhsDnv5v4-YQv5CTIYAgzwyPA3IGDwDIqUtuS5CQ6Q0NmLDqTw4jmOo+j1No9juPkKOF5Qae17OIxLLkOe8BgE8MBUPxNVGci14SuQX0w3DGAI3IRN07TKP0zwvYyMwzDswxyyLOe+xqxrZri5LZPS7L8hI0ritYyr5DfZrnM66ktxsiL8Bi4Txvk5TcsW9bCvY4Qxh5Cz1v29r3OpIHeTXuD31y-x+zwMVBIO7Asc-dNRkICn2tp262qTdi4YzEMycWAArGggQnntkA8An0ADiklfV3tMh2GYzCrDBFi5ALPB7cEhAQNGcgpEesCLEmWR9k3FhzntXcyIs4-FXtWQJ-ADwyiP-G3C0w+j-iFiz4OmAAMyELH-FowAXnvdw8IfEBjyfjdnxgl+x-vT8jy-x+n3np-K++cNyFz0olAIn1yBDz-q-PgDxCAyFNJQb+SIUhoD2ggZgopJzl1boTIUeUMGxw-GYVyZgUiTmrrqZB0ALAPEnlJUh1gZR5B3HBKAKQLzq2YLHU+VCZyzljqXYhFcq410JiyMweQ4gkMJvfOIrkTyCNjtxGAcQ8gpBwBIiwWB8EngsDomhxjJE+Dji9FwkBYCAwsHEIYQpyDp3jsPW+8AqFYAIeY2QqxKEWAvKQQJa5tQpUWsiBwnFbJ1lhJ2B401bKCUgcXL6m9t67z4BCBsLR3opx4PAa+ic0m-TIRQ-idx8IJEIBgrx65vDgMSVpJASBUk71+ilfiDl3rOQoRECwPjGLcIAJzDIsOuepKVml3w6UwpyyCemiX6X4i8wzBmjLqd5BpSUb6EE2b9TpsyXLDF6YsoZIz1zxL4rsyZOz2n7O6UchZyCBn+JWWssBGyZpzRHsk8gDxWHsN3DwLh-jeHuAsMpCwlYiwWDyVQAEA4IAAmCoTbZr02BLCXCAQ8vpoBIAACIAA1KwsilAAFUfoQLWW4ACyQkdxIJwRgUEsBAgiD4OyAA8txUgI9RgODQB6EAYKIVQosAADgsMinUrBYAYqsCytl7IkTWF5fyls4KVKivLvxFAkqQrZGVTyoy8jvFPL8T-Li5hXykMYhQ3J+TCb3iKHk+1sdFFAvgCoiw-FJzBPeQklGFRoEnJBerFhUkAWcO4XwGNbrEnKJSIMzBhMM6uPcRYScnizFfQzlYgGQMaag1jlxX40kYVyAdeY1NWd008FTs4l6icy51tzg236pghQtFFC2lkedzGUBPL9C1VLXUosKa016Lj6YIp4Foqw8gICuEXcQKAfr1kBv0EgJ4WsPqE1uq+TFnhPDwBnGgVcoD12XMDeUepnz5rRGgQI8RXivqiJKM+7N5B8JcUnrYxhtIZRqNxHA4+CCkEoMrV9Ih77k39vQfPNRfANGzpNV9aRsjj6wa+s6+A-E32ihbp+gdv0l15GPu9Tysdnz8mecEOISw10q28vUmqN6638R0BYcBPyn3TgXhepjtkWPIgqOM-QbGZAcYBNxsTaxoF-IjRwoF3CoB8CwFANAq691mu4aChR8bPVUN9QJ8BwnDBcY+StEeEmpMWdsnZy5d7vnQPdQmiwSa1wqHhCAZ1MoODcHOhoGgXYez0F0CAGGNAxAwKqb+X8cFAhsLoKjX8LJCQkAepgLAWAMBoF-N+8gv4Qv7jC1IV2NBSsEG4uQbE8B-OcE4GgAgKrjXzxAPCTgk4CAYBQOXdreBGsED2j-frma8CTkGXgHAWAUBTZmx1wbIBdSkFcPAdkaB+ude65XTbTX1p7W-aNrA43Js4EGfgM7OBYSwlUOoQQNB5oiCFJIAgkXhDRcCLF+L8Qkt0lSyPJ7bAHqTgwCDrA-2BzPYwDoMrxkaAw9u4F+7wg0tslgND8Lb2QAfa+wl37KXUcZcwAAFhQLl-LiLCuE-RzDgg5XhAI5u0AA
***** MithrilSelect https://github.com/spacejack/mithril-select
***** Example Flems
******* Forms a la Barney

https://flems.io/#0=N4IgtglgJlA2CmIBcA2ArAOgIwE4A0IAZhAgM7IDaoAdgIZiJIgYAWALmLCAQMYD21NvEHIQIAL54a9RswBW5XgKEimYDGD4BXQQAoofHloaCMAIz5QAnngAEu4AB1qt21Fptar1wF5bwSWdXAAd4ACdSCFI2Wz94WIA+eyDvd09Y2woMbOp4AHdbADE+MLAAEQ9aXXgMTzCAc3g2DEISsABKDGE2MIh4Ul12gF0MMPgoLR54XX1KuwoAa3gbWwA3WlgteCH2xPsnF29XbIw02jwUo8XlodskNY2ti8PXcXa7APaUr+o3vYcUqs+gV7oM9hRLrYwLoAOStUowj6Q1wCCDUYJaGJ3WyhCJRNjPI4o6g8Fi0aiNbG4yLRQlEgSkLRmSAxe7xHxJA5E7w1YJjVbdMrwQi0LSwNiDZG2QIvaV0o7QmGwWhmeCwRFS1wwwoQCIxOgMDWyhWwsxhGHvTVQ2FojFsCgG+A+Yh6gByMiGFvl3ktxtsUsVytV6u9RxhABlaNFbI6jdzXIqzV6rYrbZiHTIfMrou6GJ7fdyC0SA7Cg2q4-GYQBRMC0EgV7mJ81Fxs29Hpx0+eC1khDChsKyhLs92D5qUt7wlmFmTFsASI2wwgDKTJZFshE8hir58AbrgAUkuAPKujDRXoUiCEKyzTx2HRQYVo8Z2ABMPyOH9sQ2cb3a3BAfgwGCEhwlEMwVTVCQpBAR1RAwHhSEUQDlG6eD4TAABaYg1SgWwAGpbAAKn8KFaAaNFMLnYJ7iwbtpWcMtYFIqAomCZUrHuMxYEMBYAG5bFaQRMMiAAveB7gABgwAAObsBPECQhgIWA0QWcgkCoWCZFEFkWF6LgCC0MIuCYdg2GCUgkAAemsnRggWeoEL4MBrL0gyAAEsGwDAUDciA2H0kgMAUACB1CURQvEIZxCAA
******* Forms a la Scotty

https://flems.io/#0=N4IgtglgJlA2CmIBcA2ArAOgIwE4A0IAZhAgM7IDaoAdgIZiJIgYAWALmLCAQMYD21NvEHIQIAL54a9RswBW5XgKEim-aqTYACAIIAHPQGU2tIVoC8W4FsJ8ATmCRXxW8QB1qH9Zq0Axe2C+EPCwUBZWHlpaAG7BAO5OABTApmx2pOIAlBYAfFpgiQDkGLYOALTEIVCFeFqRUflFsLQARiE1WqnpGHwtchjNbbCZePVRBYUQ1HoArmwd1mMNbACeevBOXaQ9fRir66PUDQ3RtLAzG51sadu9-afn8IfHUQJTs2xOYBhxEGwsOmudiKDwuHWiuQiRxeUQA9LCtFA+DEztBTBABFoWPA7E9OtQwhBCJ1YLAtBBSFoAOZ8PhQDAMpbHLY7e5nC7haJM1yZJZZeq86juTzUbzafwOcKJbLmPLAepimzBUKUywUJbWOgMJyFYjpea1faXQpCAAeBq0gxCOqC+q0ADkZOD2cbCq5ng1NTIdc1NB0jTqzRarbAdQAZWg+R0MZ2PHVuyQarRa43wMC0Ej+tap9OZ2ohnUAUVzsFjF3jrnqAF16vVcWwZnYjvLoVFYvAElppZCJqUwIVubVFq2XgJSDMWpBPlp4JCWzDjvAMHpcdFhGwACLwQi0GawNjS7nHSoqkr2Qu0HgsRJ3SH6IwmIRnhwUO4YFNV8LzhfHFNON8prUoKXG+wFHg0-IjscwowjBLy1CeUDbOmeg3n0PaJBKgTKlAQ5aHc-7oVkgowrUEzvHMFBGuY46Tn8VaFCRDRMcKwpeGO2gALIZkcljfu2cTSt+UT1o2RwTAOUFaGRmEBExxy1AA8n08A8GwGAANbwCspCJPeximEufaZBgKGJFpKwYYUHQAAYACTABZ4hOA5+mPkZAQUBZVYYMB4g2Zk8laCxHhsdQ3xgHwMyCIkSI8DMDCCBgLR0istTcVMmTcCA-BgHoJA4qILStCEEhSCAKaiBgPCkIoOXKOuVV9hUOFaAA1FoABUVj5LQdhUlMZRsHwehOFgaaVtQIY9VAFJ6M0KxOC0sB8DwGkANw2MoZSkBAABelwAAwYAAHGmm3iBIVYELAUwaeQSBUBVMiiFOLB2CQ2WNlwTDsGweikEg8LRXoGlUtVfBgLCb0fbAAACWDYBgKDQ3870kBgCjZUaohY+IVbiEAA
***** Date Range Picker component
https://flems.io/#0=N4IgtglgJlA2CmIBcBWAbAOhSgNCAZhAgM7IDaoAdgIZiJIgYAWALmLCHgMYD2lL8fshAAeKBABuAAmgBeADogoigHzzKsHtXGUA5hgMZ1IgPTiJKziGLwEXFhD6kGAJiRoQAXxxVa9RgBWpNx8AkIM6ryUxCxSACLUAgBK1HrwAAoQXADW8ABOUrJSABTAUoksecRIUmV5qbrwUp7NAJSyKrXqUlIIsVwArjE8YACyPFBNRfjUsDYA3N298LGUPADuhVKU8JsJAsWti5Q9S1ExUgAO2lvEhZ3EGAh6LExSnQCMUgD8Unc1igADIopABqP7HM5OWL4Hh5MCJfZTKRQRLwADyACMAvcpEsej1UQIsQEMI0WAAxAawWAATXg1DyhzB+IJigAtCDQayetcoMUiRjsWSVuN+ExmeCvuDFIpWiyTgTTiBOSAFUredoBWiSSKWEjJXiQHLIYqlVDorEBpdBUiUmktvBpB0umblqsNlsdns0Ydjkr6mkMCweEitrD4Yjfd74r7WkdWYNhmMJsiZnN4KalcR1hAWFw3sUncHGeSMBJZgN4PLgInqDYpAByWawRtIHlSQONDD4PIjMPTOEI-XR3axg4fACc05wUkBs4+8f9GsxeQZ2SzBK49aajbAoSYbY7XfgPb7YAHUgjw4NMdvGz1VJp9MZh1na3WerFrzfUkXCbdHpV3XTcem3BtGwATwZPIj0AzsGlPXt+zRcMhyjA472jB9ySfOkYN-ec-yXDtgOoDcOzrCCkxDMA4I1KQaJGcZJi2Soq2XJUyIot1PCWTxNzXFgBjyE5azdPgIEoPMagAfQkNZWJdcSGL6bZPSKLCDgAhiTzPFCBC2PTkIvVCAB8zKvdCR0wsd70-XDqXw19WnfHDRQPX9-04gk9JDS8-NDczLOvDD4GKD8dIJbx1FZCQIF2OSFNTXEVI1ISRJOMgOx6MBikUGw7BYDBBXZE92UuLJcjydlCvgexFBwHKCTKPgC0QmprVtNF7UaZomvgpU8sUHhLgcPgyArWAq1kFsAF1GqNABBGkpAAFQgOg5QGhihvykBRvGyhJsreBZGgxkFs4I01qYCA7hfPJtua3L9sOxxjqmmb93FOayDq+x4CgK7Z0UW77qkb8mGewaCWGg6xo+k7prOpiwBBo0AGEhlouUXqkVzmvh4hrkoEq0TKxCKqq-J2RMxb8bRliml+eGpMuAYWDIFhIMuM7BT+y5YGoLh4CYHhYEmPJZFpWXaXZUZRnZOI4j+4gIAALzOj5ARB-HdoN1rKHatIaidXFjPPS9ixYUsVnLU62n1g2ehqS2DOrHbduJ0mGbVdkjUJ2GfdScmBEptJqZyWmQwZ2GwJx5iUtZ-b2c57nef5tFBeF0Xxcl-IZblhWlZVtXNe13XGudl2lSNk3GjN51OkC62JBLPIyy+ppPFaGuDbdxDgyCgQ+-ghbeP49Q+ModQTy+IpgAEufEJcLYyhMpEARAFxAUBFB2Q+Fx2V3xb-LRbfd8BAB2dlAQAFjvlwQWX2fKDADA+058KoB4QY6H4HqAAoggABLAABCkEACS-JFDKBAK5I0JhFppUUMg5AtQpDxUSiUeULpspujZpQDmXMeZ81kAIAAHiwK6Qc9qKFXDDPadpEKZGjnkWcdQOoITSF8XuXtXoMKegggRUh4aYk5iGWe10Oz11gFVOSuJzgS1PJoXQ+0ADiPAACERowQ8MaB8fSplDIyjVCGPR4J57DyRPKGK8FFBaO0UwuG+1GEiNZHlFhaQ2HVU4QY+Ag80hr34Z4txwi6GuIYZIvgccGJyIUVIWSSinAqKeDwdRjidGWICS4YxYYzFSAsVyXJNi0R2NEcqJxeNFRzRnr3Y4VgAZHWcCAFAHwkCAi8D4EANA6DCAwFwYgwQQBRDCCwAZpVyqVXYXTc8rpcqlikuyBA+AWA1EBFgeAYBjgzxMAAKnUGnWIaVxAk2FpBGomJNA5GXJASg7JcxQFeDUAAHICCQ6w7lLMoBs8onMeC7P2cgt+xyM7kIFgslE90hbUEuTIDQUlMxLARJQx50AXl-hQNs3ZTTbD1RacIV5SAADMXg5p4HkZQbIzgKC9L8MISArw8hECsCJDgDBWAsEuNUEwJgBjEOyPoXgYATBMqYCy2AAABIxRi0BirzBKogGAghWDIf4YgXAWVjTxUVD6rSPhoHcGSzwdSgA
***** Drag and Drop
https://flems.io/#0=N4IgZglgNgpgziAXAbVAOwIYFsZJAOgAsAXLKEAGhAGMB7NYmBvEAXwvW10QICsEqdBk2J4hcYgAIAysQyNJAXknAAOmkmSoECYk3J1mzcAgATPQAYKkuLQBOxAJJpTMAB6XrmHHtXhatH7shkYm5pIAjNa2Ds6uHpFeXL4gAEYYdkEUIcZmegBM0fZOLu4FST6SfgDmdvQA1lk5KnmSAMxFsaUJHZLeMClgsDCpsHBNGqGtACydJfF6s33JVSBwMAAOAK5QAG4wphhBIQC66qzq6uJSACIAcjdKkgD6u0oAfCoh15KmLk-AX52DDVPRoHZQaymOobMEQyQXSY-P6mADCUAwcDgTwgjCwH0kuJg+MUpN+Lnw0JBkgA-JIAORU6rVCBoar0yR6Ikkskoykw2kM6G0DYbVnszkM+mXSZ2GDELZ2DRqSaaXYQGAAdz0AApAfJiHY4HpAdoJAiEQBKAkqoxGOUKpWSLA6+n4M3EaWqu2Say2n12+hM2j7Oy6mDWxSfGD4DZy-YMG4wMAYHbEHWW7LegNBmHhyOff0Bu0xiQigAKMJB8gg9AzzWLRmRwOZB0cpjcTw9+FZ8QA8mAdXymZaG43JM2RRs2x2uzpiD3ugOhxThRtR2gx42fqz1g5a2h253lEzqjPOwAeIFT8+CtfT0xHyQAakikvv563xeRMFgxAPT4ni2Z6PrOnwfqBnZ0qet6vhE77AZ+m7ZuOEBgJIOq7jA+70E+ACEvK-vKAEdtaRbjnaAD0lGSAAnrQioTlsZb4hOtCuJIYD2JIWwbIc-5spIxCEDAWjzpI1S0PAkgiXK+Bfo23ZwBs2jUDAmFoHu-64R21hWOSpj8iCG4UQGSkqRAalDkR2mHrpkQmaZmiIgpPrDi2TzuSKTzglAUCuYijaBcW1jdlgGAbDqmF4gWXwoXaDqKhoLpukyAC03LIKeGCjDAJxek5fquQG9QwLRXJ4j2phZk5drUBiWJ6Ci6KYnA0XEpmxU+rmIISBkxC6rF7nUso3I1bVmg9ZJoaDTahLoSuhkjgZ-LeaNeIIl1wUUdY3L4P0rmOQGrBHUYp3BYiLloD8ACCooAiE6parNUbOq6ADEEUbPS1guvcNx+mJugyHIjDuuJJ0bldWD4FgDEMEOtDUFsOAMPgqTsbR1h3eulA0LQWBirAdh4OkqS-nj6ywNQtkIDwERtIgFhsBwID9Hg+DUFieNCIwzA8OD5r+hjdiuGGkQbJ2tjaKYkijBg1D1AA3CE6SK7U8PhPLisq5MmpmMJBQWBYku61dRnVBlG3+hstBwLiB56HKGL-vsuuqMQGwYKYpjinoEQm247sKnuaVUzANNgvQMC65oav1BrWwuHomqEESsdMUa9h6GlmojPUuJpbUOUZ8jWfi8XqRm5cxDqBbVvEi+kj19ycWaOFdgsmgaXECK-uS+cNd16e4pxR78eJ8nkhyqYpeKjEOd56kBfEEXwKpKk4pz+XeiV5vbLV5utdoKtoqj8LCsJ3USfhLUMBMLRv5QLQmqD0flNETTB50yA+QAByIAiGwE4VBtBoHqHTVAbMuB4CwLiQgdhoB40VOQHgJBPbGmoknDYCdOYE0onA4SiCoAAAEIj4HIQANgIfA4h+B+B42ILRaceA4DUEQRsUQrATisCAA
*** Search Widget Noodling
https://flems.io/#0=N4IgtglgJlA2CmIBcBWAbAOgCwoDQgGd4EBjAF3imRAxIIJHxIHsA7A5hal2WAQwAORKvgBmEBAyQBtUKz5hESGgAsyYWIxAtWFXdQA8UCADcABNAC8AHRBRbAPmutYzPsdYBzDD4zODAPTGJg5aRKRkEGxSIABMSGggAL64cgpKNABWDExsemTUCGRmBCrMAO4AyvB8AE4kKmaWZqJ8sEQA3M7OYBi1zACuFAAUUMwkA4q6GJ7wZACiCFNkAEIAngCSUMO29iAAlLhmtgG2R8DOZscgp8hmwGYmEPDlSGbD+00Ox6xXV2A7EBkPgAIwAwnk+BBWPBamdLn8rqUKtU6g0EYirgB+MzSDGYxEA2wYYEgko1eoqAC0OmB0NhZx+BOZZiJIGhAiGGCIaJU0jIawE8EsFAAHmQALrSAT8EjwMqwKCwyyoym+CW2faHfEEjW-ZlvPH6ln-QEk0GM2yVOXyWpRAia3A65ls80gy0gABiEE8A1q8AdBydxpNrtJHoAInwTPAzAAVCrseCsPbakO64MEtkgoZkNh9H1qKltH2sRkPNgkWAQEgAazeAH0viUylUKQ0mmYAITItu8swpa4ARU1GP2SWcSX2XVYYWI8HIUXY1AAjCgkLEAOzJVIgeSKai0ehaWnJgrKN33BHGAgyvhrN7Q6swmdXATuDyeKkIURkN4r+AwBnCcy1YAABWt4DWURanSAgSmrJVoSvfUYOYMAUMRMhYPYURmFqMA3gIEg2ngAANYYAAZp3xAIACpWTqTxoW-eBf3-SjKIAUlfP5ymgMgVDeABmTieLMOjTn1ECETzTC-mwvhcPwwiShIhAKJXDBqN4q56MY2pmNYVj2LMbjdLMfioEEjjzIkqSrhAmTWG5dtGgufUlIgMA+EiNgiMQ+BkMojA1wIXjFPYCA-OMyJIC8KlRAGVhF38swaiIKloV4qybLMABOWIeMnboXLtTwixLTxfg8q5RFcXy3nKtRgLnCIlxiWJ4hXFdkglfBn1rKRZD3dJqEgQS7U0fA-U0ZQ1DIIQkACAJkoEWtvBYMAAgmlQprArStLQHbor2iQMGyLQBSFahiLtAQCnwcIFximIVzQBJhL6pIgA

https://www.google.com/search?ei=NWumXJTID8jJ5gKNhY2IBQ&q=programming+an+expanding+search+box+css&oq=programming+an+expanding+search+box+css&gs_l=psy-ab.3..33i22i29i30l2.13133.24340..24573...10.0..0.158.4250.20j23......0....1..gws-wiz.......0i71j33i160j33i10j33i299.Ue4tD56HePo

https://tympanus.net/codrops/2013/06/26/expanding-search-bar-deconstructed/
*** JavaScript
https://github.com/bevacqua/rome (Date Picker)
https://github.com/JedWatson/classnames (dynamic class attribute support)
*** Iex http://echobind.com/blog/2017-08-31-tips-and-tricks-for-iex/?utm_campaign=elixir_radar_112&utm_medium=email&utm_source=RD+Station

Command Line History: v(<n>), positive for absolute and negative for relative to current command

Enabled persistent command history between sessions: export ERL_AFLAGS="-kernel shell_history enabled"

Stuck in syntax error hell:  #iex:break

$(PROJECT)/.iex.exs  => throw in useful aliases, loaded on session start

Debug with pry: in code `require IEx; IEx.pry`, then start Phoenix via iex: iex -S mix phx.server

Pry without changing code: in iex session: `IEx.break!(User, :list_users, 3)` to break on that function (but no access to Aliases and imports)
*** SVG
https://svgontheweb.com/
https://24ways.org/2014/an-overview-of-svg-sprite-creation-techniques/
*** Swagger
***** Editor: https://editor.swagger.io/
***** npm web server
        $ npm install http-server -g
        $ ~/.asdf/installs/nodejs/8.2.1/.npm/bin/hs -p 3000 --cors
        Then in swagger UI, http://127.0.0.1:3000/swagger-test.json?sgg
*** Fonts: icomoon.io
* Authentication Notes
*** Authentication Analysis
***** (Authentication.ex)
***** /recalc (RecalcController)
******* index TODO (INACTIVE)
***** /reset-password (ResetPasswordController)
******* create
        - FE should call Credentials.clear()
***** /scenarios (ScenarioController)
******* index
        - BE must verify that the Authorization.optionally!() didn't send a response
******* create (INACTIVE)
******* show TODO
        - BE must verify that the Authorization.optionally!() didn't send a response
******* update (INACTIVE)
******* delete (INACTIVE)
***** /sessions (SessionController / login.js)
******* create
        - FE should reset errors() before request
        - FE's local email/password/token can be deleted
        - FE should Credentials.clear() before request
        - FE should remove console.log() on line 17
***** /userscenarios (UserScenarioController)
******* create
        - BE check if responded, not halted() [conn.state == :unset ?]
        - bad cookie should fail authorization, which UI should route to /login, which seems ok
***** /users (UserController / register.js)
******* create
        - Authentication is irrelevant, no possibility of stale cookie
        - FE should reset errors() before request
*** Authentication tests
***** [X] register, good email, good password => create & return session
***** [X] register, bad email (no "@", already exists), good password => return error
***** [X] register, good email, bad password => return error
***** [X] sign in, good email, good password => create and return session
***** [X] sign in, bad email or bad password => return error
***** [X] sign in doesn't set Credentials.name
***** [X] forgot password => email reminder
***** [X] forgot password => unknown email address
***** bad token (e.g. from wiping the db out from under the user, or use one browser, login with 2nd browser, go back to first)
***** [X] reset/change password and/or email
***** back-end server down
* Swagger Docs (but maybe use apidocsjs.com instead)
~/.asdf/installs/nodejs/8.2.1/.npm/bin/hs -p 3000 --cors
http://localhost:3000/swagger-test.json?asdf
|--------------------+--------+---------------------------------------------|
| CONTROLLER         | METHOD | STATUS                                      |
|--------------------+--------+---------------------------------------------|
| /faction/:id       | GET    | DONE EXCEPT AUTHORIZATION TEST              |
| /figure/:id        | GET    | DONE EXCEPT AUTHORIZATION TEST (& PUT/POST) |
| /newsitem          | GET    | DONE                                        |
| /reset-password    | POST   | NEEDS REVIEW & DOCUMENT ERROR RETURN        |
| /scenario-faction/ | PUT    |                                             |
| /scenarios         | GET    | NEEDS REVIEW, & PUT/POST                    |
| /scenarios/:id     | GET    | NEEDS REVIEW                                |
| /search            | GET    | NEEDS REVIEW                                |
| /sessions          | POST   | NEEDS REVIEW                                |
| /userfigure        | POST   |                                             |
| /userscenarios     | POST   | NEEDS REVIEW                                |
| /users             | POST   |                                             |
| /users/:id         | PUT    |                                             |
|--------------------+--------+---------------------------------------------|
* Ideas
*** Limit required figures to current books (per email from Barthold Pieters)
*** New figure types: ?specialty ?display ?diorama
*** Move Logout to Account page
*** Tally scenario Good/Evil wins
*** FE Responsive design
*** field for "Did I make up the OOB?"
*** FE Additional filters
    [ ] Faction
*** BE: White Dwarf scenarios?
*** BE+FE Scenario historicity: Hypothetical, Generic, Book, Movie
*** FE: scenario list screen needs icons for factions in battle => POC DONE
    https://vectormagic.com/
*** Scenario Tags (terrain features? victory conditions (#toTheDeath)?  factions?)
*** per-user scenario comments
*** scenario/book owned (or not) and filterable on same
*** Log plays (and maybe side that won?)
*** Resources could have a language (so as to support German, Dutch, etc)
*** Terrain!  Osgiliath Ruins, Laketown Houses, Goblintown
*** Suggestions: what should I buy/paint/play next?
      - BUY/PAINTING
        Buy is same as paint, just using a different variable
        Should suggest the scenario closest to completion
        Biased towards larger scenarios (because otherwise suggestion will always include Shelob)
           ((num_painted + 1) * 100 / (total_figures + 1)) * total_figures SORT DESC WHERE num_painted < total_figures
           |---------------+-------------+------------|
           | SCENARIO SIZE | NUM PAINTED | SORT ORDER |
           |---------------+-------------+------------|
           |             3 |           0 |         25 |
           |             3 |           1 |         50 |
           |             3 |           2 |         75 |
           |            20 |           0 |          4 |
           |            20 |           5 |         28 |
           |            20 |          17 |         85 |
           |            80 |           0 |          1 |
           |            80 |           5 |          7 |
           |            80 |          24 |         30 |
           |            80 |          62 |         77 |
           |            80 |          77 |         96 |
           |            80 |          79 |         98 |
           |---------------+-------------+------------|
           #+TBLFM: $3 = idiv(($2 + 1) * 100, ($1 + 1))
        THIS TELLS ME WHICH SCENARIO TO WORK TOWARDS BUT DOESN'T TELL ME EXACTLY WHICH FIGURES TO PAINT; MAYBE GOOD ENOUGH BUT MAYBE NOT....
        PROBABLY WANT TO AVOID DUPLICATE SCENARIO NAMES
      - PLAYING: not really possible until we track plays
g
* Spilforeningen Videos
|----+----------------------------------+---------------------------+----------------------------------------------------------------------------------------------|
|  2 | Orcs Attack                      | Best of White Dwarf Vol 1 |                                                                                              |
|  3 | Glory of the Elves               | White Dwarf 311 (UK)      |                                                                                              |
|  4 | A Fort Too Far                   | White Dwarf 279 (UK)      | https://www.youtube.com/watch?v=G6FRNZuZiPk&list=PLzZ6-_-l-0I52yFFoGzMSuyhscqAy6RmV&index=5  |
|  5 | The Siege of Barad-dur           | White Dwarf 308 (UK)      | https://www.youtube.com/watch?v=miKZsVlYk7A&list=PLzZ6-_-l-0I52yFFoGzMSuyhscqAy6RmV&index=7  |
| 12 | The Fell Winter                  | White Dwarf 304 (UK) p135 | https://www.youtube.com/watch?v=dMAkneqtxfk&list=PLzZ6-_-l-0I52yFFoGzMSuyhscqAy6RmV&index=14 |
| 15 | Defend the Farmstead             | Homebrew                  | https://www.youtube.com/watch?v=8ogcM46CbTQ&index=17&list=PLzZ6-_-l-0I52yFFoGzMSuyhscqAy6RmV |
| 16 | War in the North                 | White Dwarf 327 (UK) p60  | https://www.youtube.com/watch?v=Xkzido8qB0U&index=18&list=PLzZ6-_-l-0I52yFFoGzMSuyhscqAy6RmV |
| 20 | Battle for Tower Hills           | White Dwarf 325 (UK) p56  | https://www.youtube.com/watch?v=GucPN6IIkEE&index=22&list=PLzZ6-_-l-0I52yFFoGzMSuyhscqAy6RmV |
| 21 | The Taming of Felarof            | Old Games Workshop Site   | https://www.youtube.com/watch?v=MIOw7mb7CMA&list=PLzZ6-_-l-0I52yFFoGzMSuyhscqAy6RmV&index=24 |
| 22 | Ill News From Gondor             | Old Games Workshop Site   | https://www.youtube.com/watch?v=M9vQ2JtZi5A&list=PLzZ6-_-l-0I52yFFoGzMSuyhscqAy6RmV&index=25 |
| 23 | Flight of the Eotheod            | Old Games Workshop Site   | https://www.youtube.com/watch?v=zZ842wlKiJE&list=PLzZ6-_-l-0I52yFFoGzMSuyhscqAy6RmV&index=26 |
| 25 | The Imperilment of Lady Eleanor  | StF competition winner    | https://www.youtube.com/watch?v=2FwN6avuTKo&index=28&list=PLzZ6-_-l-0I52yFFoGzMSuyhscqAy6RmV |
| 26 | Death in the Wold                | Old GW Site               | https://www.youtube.com/watch?v=XnZ9AE7_nU8&list=PLzZ6-_-l-0I52yFFoGzMSuyhscqAy6RmV&index=29 |
| 27 | The Last King Under the Mountain | Homebrew                  | https://www.youtube.com/watch?v=L7Mn7d5OUvE&list=PLzZ6-_-l-0I52yFFoGzMSuyhscqAy6RmV&index=30 |
| 28 | The Fury of Azog                 | Homebrew                  | https://www.youtube.com/watch?v=3bzqp5McKkU&index=31&list=PLzZ6-_-l-0I52yFFoGzMSuyhscqAy6RmV |
| 36 | Hunting Orcs                     | GBHL?  DCHL?              | https://www.youtube.com/watch?v=rwl-QCMSnoE&index=39&list=PLzZ6-_-l-0I52yFFoGzMSuyhscqAy6RmV |
|----+----------------------------------+---------------------------+----------------------------------------------------------------------------------------------|
* Questions
  [?] inventory counter needs to deal with SoG Scenario 6 (Pyre of Denethor) where same figure type is on both sides
      => This is actually difficult, because the tally/capping logic is resolved in the depths of Role.role_user_figures(), where each role is treated in isolation
* FE Design
*** Initial Screen ===============================================================

:                           Login|Logout
:  Figures  Scenarios

Figures => Figures Screen
Scenarios => [[Scenarios List Screen]]
Login => Login Dialog
*** Scenarios List Screen ========================================================
: Scenario                Source  Size  Date     Owned?
: --------------------------------------------------------------
: The Fall of Amon Barad  SitE      28  TA 2998
: Shelob's Lair           RotK       4  TA 3019   :yellow:
***** {Scenario Name} => Scenario Details Screen
***** Filter: - / Owned Only
***** Filter: - / Complete / Partial / Unstarted
***** Filter: - / Gondor / Rohan / Isengard / etc
***** Sort: Size / Date / Source / Completeness
***** Need to mark scenarios with replays somehow
***** icon list: owned? playable/complete? hasWebReplays? hasVideoReplays?
*** Scenario Details Screen ======================================================

: Scenario Name (Date)
: Blurb
: Side 1 OOB / Side 2 OOB
: Resources
:  * resource 1
:  * resource 2
:  * etc
***** in OOB, iconize completion status of the figures (green=complete, yellow=partial in number and/or painting, red=missing?)
*** Inventory Screen
:        [ Select an Faction v ]
:
*** Inventory Screen, Faction selected
:        [ Isengard          v ]
: Unique Figures
: Name                       Owned Painted % Needed %
: Lurtz (Amon Hen)               1       1 O      1 O
: Lurtz (Fellowship)             1       - O      1 O
: ...
: Saruman the White (Orthanc)    -       - -
: Saruman the White (Fellowship) 1       - O
: Ugluk                          2       1 O
:
: Heros
:    Isengard Captain with shield
:    Isengard Captain with two-handed weapon
:
: Warriors
:    Uruk-hai Berserker
:    ...
:    Uruk-hai Scout with shield
:
: Monsters
:    Isengard Troll
:
: Siege Weapons
:    Uruk-hai Siege Ballista
:
: Add To My Collection
:    ...
:    Uruk-hai Scouts Box (1 sprue)
:    Uruk-hai Scouts Box (2 sprues)
:    Uruk-hai Warriors Box (1 sprue)
:    Uruk-hai Warriors Box (2 sprues)
:    ...
*** My Account Screen
: |> Change Password
: v  Suggested Scenarios to Paint For:
:    O Fall of Amon Barad
:    O Gathering Information
:    O Shelob's Lair
: v  Suggested Scenarios to Buy For:
:    O Turning the Tide
:    O Weathertop
:    O The Pyre of Denethor
* Graveyard
*** Elixir
***** https://media.pragprog.com/titles/elixir/ElixirCheat.pdf
***** http://stackoverflow.com/questions/28745193/testing-asynchronous-code-in-elixir
*** Phoenix
***** https://blog.codeship.com/ridiculously-fast-api-authentication-with-phoenix/
    (https://blog.codeship.com/refactoring-faster-can-spell-phoenix/  is part II of above)
***** http://learningelixir.joekain.com/none-of-the-associations-in-ecto/
The money shot:
#+BEGIN_SRC elixir
def available_between(query \\ Rental, s, e) do
  s = parse_date(s)
  e = parse_date(e)

  from rental in query,
    left_join: range in Unavailability,
      on: (range.rental_id == rental.id) and overlaps(range, ^s, ^e),
    where: is_nil(range.rental_id)
end

defmacro overlaps(range, s, e) do
  #  Uses the Postgres specific OVERLAPS function
  quote do
    fragment("(?, ?) OVERLAPS (?, ?)",
             unquote(range).start, unquote(range).end,
             type(unquote(s), Ecto.Date), type(unquote(e), Ecto.Date))
  end
end
#+END_SRC
***** http://stackoverflow.com/questions/3077229/restful-password-reset
***** https://groups.google.com/forum/#!topic/elixir-ecto/E5Z9oEq67nE (cast/4 is deprecated, don't need optional fields any more)
***** Phoenix can't find Jason when deployed: https://elixirforum.com/t/phoenix-cant-find-jason-when-deployed/19357/3
*** CSS
***** http://designmodo.com/css3-accordion-menu/
***** Styling a dropdown: http://stackoverflow.com/questions/1895476/how-to-style-a-select-dropdown-with-css-only-without-javascript
***** http://www.w3schools.com/howto/howto_css_dropdown.asp
*** Mithril
***** http://stackoverflow.com/questions/35677130/mithril-re-sort-array-of-child-components-after-child-component-modifies-paren
***** http://stackoverflow.com/questions/33574816/mithril-js-redirect-user-if-not-connected?rq=1
***** Module format: http://know.cujojs.com/tutorials/modules/authoring-cjs-modules
*** Scenario Resource field usage
|---------------+-----------------+---------+--------------+------------|
| FIELD         | MAGAZINE REPLAY | PODCAST | VIDEO REPLAY | WEB REPLAY |
|---------------+-----------------+---------+--------------+------------|
| scenario_id   | X               | X       | X            | X          |
| resource_type | ?               | ?       | ?            | ?          |
| book          | X               |         |              |            |
| issue         | X               |         |              |            |
| page          | X               |         |              |            |
| title         | X               | X       | X            | X          |
| url           |                 | X       | X            | X          |
| notes         |                 |         |              |            |
| sort_order    | X               | X       | X            | X          |
|---------------+-----------------+---------+--------------+------------|
* DB Schema
*** Mermaid Diagram
https://mermaid-js.github.io/mermaid-live-editor/edit#pako:eNqVVl1v2jAU_StW9kArQSta7YWpnTat3cue1j0iRZfkklhz7MwfRbTw33edOECIEZQXEvvc4-tzj6_znmQqx2SWoP7BodBQzSWj35IXTiN7b9_8z1jNZcEkVDgYrIXTIFI_x-bJqkTJbIkUzw2rFP3bEiRTEufJPpZLiwVqZte1j3puVvzjX1C66hC5UEogETjJ_zmPtZr-lkqzKxCVMpaBENdNajnLStCQWdTmkCIkaoQrKD4Q1WBL5gwFea4CJWqwHsYrKLDh25Fs2z-ToQTNlblUmgVJsxhuOgeLqV9knkzHd-P7mDANplKSkiTUZHp3EpTDuoHcT2MQw98a0ZQFwT4xtaSa5ChMDFtBna543izJJQ1nJZ4ElsiL0p5DCpWRqkoS7lf3eFzhpVBgWVB_nsArVYLEaQdipBSfviqLhtDNllroYbn6BUs1GuV0hr3KdXTdZBrM-Du8R-3YBZEt_xL2JazQxXz3w8cxwQ3cmMbAz8orWMAbl2hmbDQdjdnoxVUVanpCm8XWq0mSAaPlVnhGn8ztCheGW7ytVZ4BHQsial2ZsEGg02LoYK9oxEBK21TpHPUpcZd04nxdI9J2U7Tp8OS1-cIWSAlmpeIZtmewaRuVE5bXtKMQZhhQ-6iVMXwhou3DuKIgKszTWtGYNwRtgypKPWHdMMeiiN1Rx_pIyF4F30GMa8DTh8efSuVjdvfw-PTKxcB_xKbTTqeo9TrTe-TI7DQNE2M2nXyOpaNWkkQL7m8PNJOIeehmO5p2p5RqExD3lX_6EFcIie724taIFfChB2swZkUyUzolmJJS6EYi56mbSj10eGFwk0JecRmrSXvDRbtBT1pb0iUWrsNLJTyMOSWVphTPKrWza6WctDH6gzI1w12tzjp4enMjo0kdK9PPeLOZTDbvfeCM6Dqq3sTWgzddqoew_T0aCAetxKO_iRWszdXXa2ZXatcSTnL0z9ply-2vhRkjE00qkOsTze1g6z3y1vRncxjCYvr1JuL6JeOE7gk6PDl9tzVFosu9RN_mPSTHJVAX9cgtQV3tPxGecm6VTmb-y2mcgLPqZS2zZLYEYbADhS_AMLr9D35nTB4
*** FactionFigure
|------------+-----------------|
| faction_id | integer         |
| figure_id  | FK -> Figure.id |
|------------+-----------------|
*** Figure
|-------------+---------|
| name        | string  |
| plural_name | string  |
| type        | integer |
| unique      | boolean |
|-------------+---------|
*** NewsItem
|-----------+--------|
| item_date | date   |
| item_text | string |
|-----------+--------|
*** Role
|---------------------+---------+-----------------------|
| scenario_faction_id | integer | FK -> ScenarioFaction |
| amount              | integer | # figures required    |
| sort_order          | integer |                       |
| name                | string  |                       |
|---------------------+---------+-----------------------|
*** RoleFigure
|-----------+---------+-----------------|
| role_id   | integer | FK -> Role.id   |
| figure_id | integer | FK -> Figure.id |
|-----------+---------+-----------------|
*** Session
|---------+---------+------------|
| token   | string  | INDEXED    |
| user_id | integer | FK -> User |
|---------+---------+------------|
*** Scenario
|------------+---------+-------------------|
| name       | string  |                   |
| blurb      | text    |                   |
| date_age   | integer |                   |
| date_year  | integer |                   |
| date_month | integer | 1-12, 0=unknown   |
| date_day   | integer | 1-31, 0=unknown   |
| size       | integer | # of models       |
| map_width  | integer | in inches         |
| map_height | integer | in inches         |
| location   | integer |                   |
| rating     | real    | rolled up average |
| num_votes  | integer | rolled up sum     |
|------------+---------+-------------------|
*** ScenarioFaction
|------------------+---------+----------------|
| faction          | integer |                |
| suggested_points | integer |                |
| actual_points    | integer |                |
| sort_order       | integer |                |
| scenario_id      | integer | FK -> Scenario |
|------------------+---------+----------------|
*** ScenarioResource
|---------------+---------+-----------------------|
| scenario_id   | integer | FK -> Scenario        |
| resource_type | integer |                       |
| book          | integer |                       |
| page          | integer |                       |
| url           | text    | online resources only |
| notes         | text    | not used?             |
| sort_order    | integer | ordering within book  |
| title         | string  |                       |
| issue         | integer | magazine issue        |
|---------------+---------+-----------------------|
g
*** User
|---------------+--------+------------------|
| name          | string | NOT NULL         |
| email         | string | NOT NULL, UNIQUE |
| password_hash | string |                  |
|---------------+--------+------------------|
*** UserFigure
|-----------+---------+-----------------------------------|
| user_id   | integer | FK -> User                        |
| owned     | integer | # of figures                      |
| painted   | integer | # of figures (should be <= owned) |
| figure_id | integer | FK -> Figure                      |
|-----------+---------+-----------------------------------|
*** UserFigureHistory
|---------------+---------+--------------------------------------------------------------------|
| user_id       | integer | FK -> User.id                                                      |
| figure_id     | integer | FK -> Figure.id                                                    |
| op            | integer | 0: +unpainted, 1: +painted, 2: -unpainted, 3: -painted, 4: painted |
| amount        | integer | 0..n                                                               |
| new_unpainted | integer | 0..n # of unpainted figures after this operation                   |
| new_painted   | integer | 0..n # of painted figures after this operation                     |
| op_date       | date    | date of operation                                                  |
| notes         | text    | (optional) notes on operation                                      |
|---------------+---------+--------------------------------------------------------------------|
*** UserScenario
|-------------+---------+-----------------------------------------|
| user_id     | integer | FK -> User                              |
| rating      | integer | 0 .. 5                                  |
| owned       | integer | rollup of owned figures from scenario   |
| painted     | integer | rollup of painted figures from scenario |
| scenario_id | integer | FK -> Scenario                          |
|-------------+---------+-----------------------------------------|
* DB Queries
*** What should I paint next?
#+BEGIN_SRC sql
SELECT
FROM UserFigure WHERE
#+END_SRC
*** Detect Scenarios whose size <> role amount rollup
#+BEGIN_SRC sql
SELECT s.id, s.name, s.size, SUM(r.amount)
FROM scenarios s
INNER JOIN scenario_factions sf ON s.id = sf.scenario_id
INNER JOIN roles r ON sf.id = r.scenario_faction_id
GROUP BY s.id
HAVING s.size <> SUM(r.amount)
ORDER BY s.name;
#+END_SRC
*** Detect Scenario Factions with non-consecutive sort_orders
#+BEGIN_SRC sql
SELECT s.id, s.name, f.id AS faction_id, cnt, mx FROM (
  SELECT scenario_faction_id, COUNT(sort_order) AS cnt, MAX(sort_order) AS mx
  FROM roles
  GROUP BY scenario_faction_id
  HAVING COUNT(sort_order) <> MAX(sort_order)
) AS x
INNER JOIN scenario_factions f ON x.scenario_faction_id = f.id
INNER JOIN scenarios s ON f.scenario_id = s.id
ORDER BY s.name;

#+END_SRC
*** Useful scenario manipulation queries for when the CMS goes south
SELECT * FROM scenarios ORDER BY inserted_at DESC;

SELECT * FROM scenario_factions WHERE scenario_id = 288 ORDER BY sort_order;

SELECT *
FROM roles
LEFT OUTER JOIN role_figures ON role_figures.role_id = roles.id
WHERE scenario_faction_id IN (SELECT id FROM scenario_factions WHERE scenario_id = 288);

SELECT * FROM figures WHERE name ILIKE '%Irolas%';

INSERT INTO role_figures (role_id, figure_id) VALUES (3860, 775);


DELETE FROM role_figures WHERE role_id IN (
  SELECT id FROM roles WHERE scenario_faction_id IN (
    SELECT id FROM scenario_factions WHERE scenario_id = 288 AND sort_order = 2
  )
);

DELETE FROM roles WHERE scenario_faction_id IN (
  SELECT id FROM scenario_factions WHERE scenario_id = 285 AND sort_order = 1
);

DELETE FROM scenario_factions WHERE scenario_id = 285 AND sort_order = 1;

DELETE FROM scenario_resources WHERE scenario_id = 285;
DELETE FROM scenarios WHERE id = 285;

SELECT DISTINCT faction FROM scenario_factions ORDER BY faction;
*** Copy new figures' role_figures based on existing figure
#+BEGIN_SRC sql
INSERT INTO role_figures (role_id, figure_id)
SELECT role_id, <new_figure_id>
FROM role_figures
WHERE figure_id = <old_figure_id>
#+END_SRC
*** Rollups by faction for a user:
#+BEGIN_SRC sql
SELECT ff.faction_id, uf.user_id, SUM(uf.owned) AS owned, SUM(uf.painted) AS painted
FROM faction_figures ff
INNER JOIN user_figures uf ON uf.figure_id = ff.figure_id
GROUP BY ff.faction_id, uf.user_id
HAVING uf.user_id = 2;
#+END_SRC
o
*** Collection sizes and painting pcts for each user
#+BEGIN_SRC sql
SELECT user_id, SUM(owned), SUM(painted), SUM((painted + 1) * 100) / SUM(owned + 1) AS pct
FROM user_figures
GROUP BY user_id
ORDER BY SUM(owned) DESC
#+END_SRC
*** Figures and their # of scenario appearances
#+BEGIN_SRC sql
SELECT f.id, f.name, COUNT(*) AS num
FROM role_figures rf
INNER JOIN figures f ON f.id = rf.figure_id
GROUP BY f.id
ORDER BY COUNT(*) desc;
#+END_SRC
*** Scenarios for a given book, in order
#+BEGIN_SRC sql
SELECT s.id, s.name, sr.sort_order
FROM scenarios s
INNER JOIN scenario_resources sr ON sr.scenario_id = s.id
WHERE sr.book = 24
ORDER BY sr.sort_order;
#+END_SRC
*** Recent Activity
#+BEGIN_SRC sql
SELECT ufh.id, ufh.user_id, ufh.figure_id, ufh.op, ufh.amount, ufh.op_date, u.name, f.name
FROM user_figure_history ufh
INNER JOIN users u ON u.id = ufh.user_id
INNER JOIN figures f ON f.id = ufh.figure_id
ORDER BY ufh.updated_at DESC
#+END_SRC

*** Most Painted Monsters
#+BEGIN_SRC sql
SELECT f.id, f.name, SUM(painted), f.type
FROM user_figures u
INNER JOIN figures f ON f.id = u.figure_id
GROUP BY f.id, f.name, f.type
HAVING f.type = 2
ORDER BY SUM(painted) DESC;
#+END_SRC

*** Related Figures (won't find unassociated figures like Gimli on Uruk-hai; also, how to handle Legolas and Gimli on horse?)
#+begin_src sql
select * from figures where id in (
  select distinct figure_id
  from role_figures
  where role_id in (
    select role_id
    from role_figures
    where figure_id = 786
  )
  and figure_id != 786
)
order by id;
#+end_src
* Resetting User Password
**** Using interactive console (which stopped working)
  $ gx login
  $ gx ps:remote_console
  > u = SbgInv.Repo.get(SbgInv.Web.User, <id>)
  > SbgInv.Repo.update(SbgInv.Web.User.update_password_changeset(u, %{password: "reset-me"}))
**** Direct db
     - in a local shell:
       $ cd ~/GitHub/sbg_inv_be
       $ iex -S mix
       $ Pbkdf2.hash_pwd_salt('changeme')
       (functions change from Comeonin version to version; can check with `Comeonin.Pbkdf2.__info__(:functions)`)
     - in BeekeeperStudio, connect to gx db, find person in `users` table via `email=<whatevs>` and paste results from previous step

* Adding a scenario book (and adding army/faction is much the same)
*** BE (do first so FE doesn't ask for scenarios from a book that doesn't exist)
edit [[~/GitHub/sbg_inv_be/lib/sbg_inv/ecto_enums.ex]]
-> add entry to ScenarioResourceBook

magit commit/push

create release in GitHub [[https://github.com/dptww1/sbg_inv_be/releases]]

$ git push gigalixir master
$ gigalixir logs

*** FE
edit [[~/GitHub/sbg_inv_fe/app/constants.js]]
-> add entry to BOOKS

edit ~/GitHub/sbg_inv_fe/app/assets/index.html
-> update release

$ make production-build

magit commit/push

create release in GitHub [[https://github.com/dptww1/sbg_inv_fe/releases]]

FTP up

* Adding Boxes/Sprues
*** Code
***** priv/repo/migrations/20190604000000_create_boxes.exs
#+BEGIN_SRC elixir
defmodule SbgInv.Repo.Migrations.CreateBoxes do
  use Ecto.Migration

  def change do
    create table(:boxes) do
      add :name, :string
      timestamps()
    end

    create table(:box_figures) do
      add :box_id, references(:boxes)
      add :figure_id, references(:figures)
      add :amount, :integer
      timestamps()
    end

    create index(:box_figures, [:box_id])
    create index(:box_figures, [:figure_id])
  end
end
#+END_SRC
***** lib/sbg_inv/web/router.ex
#+BEGIN_SRC elixir
    resources "boxes", BoxController, only: [ :index, :create, :update ]
#+END_SRC
***** lib/sbg_inv/web/models/box.ex
#+BEGIN_SRC elixir
defmodule SbgInv.Web.Box do

  use SbgInv.Web, :model

  alias SbgInv.Web.{BoxFigure}

  schema "boxes" do
    field :name, :string

    timestamps()

    many_to_many :figures, Figure, join_through: "box_figures"
  end

  @required_fields [:name]

  def changeset(model, params \\ %{}) do
    model
    |> cast(params, @required_fields)
    |> put_assoc(:box_figure, Map.get(params, "box_figure"))
    |> validate_required(@required_fields)
  end
end
#+END_SRC
***** lib/sbg_inv/web/controllers/box_controller.ex
#+BEGIN_SRC elixir
defmodule SbgInv.Web.BoxController do

  use SbgInv.Web, :controller

  import Ecto.Query

  @MAX_FACTION_ID = Faction.__valid_values__
                    |> Enum.filter(&is_number/1)
                    |> Enum.max

  def index(conn, %{"factionId" => factionId})) when 0 <= factionId && factionId <= @MAX_FACTION_ID do
    # Trying to create this SQL:
    # SELECT b.id, b.name
    # FROM boxes b
    # INNER JOIN box_figures bf ON bf.box_id = b.id
    # INNER JOIN faction_figures ff ON ff.figure_id = bf.figure_id
    # WHERE ff.faction_id = ?faction_id
    # ORDER BY b.name
    query = from b in Box,
            join f in assoc(b, :figures),
            preload: [figures: f]

  end
  def index(conn, _) do
    send_resp(conn, :bad_request, "factionId query parameter is required and must be between 0 and " <> Integer.to_string(@MAX_FACTION_ID))
  end
end
#+END_SRC
*** DB Schema
***** Box
|------+--------+------------------------------|
| name | string | name of box/pack/collection  |
|------+--------+------------------------------|
***** BoxFigure
|-----------+---------+----+---------------------------------------|
| box_id    | integer | FK | Box.id                                |
| figure_id | integer | FK | Figure.id                             |
| amount    | integer |    | # figures of given type in collection |
|-----------+---------+----+---------------------------------------|
*** Controller services
    GET /boxes?factionId=<n>   # factionId is required parameter
        [
          { id: <box_id>, name: "Army of the Dead" }, ...
        ]

        => SELECT b.id, b.name
           FROM Boxes b
           INNER JOIN BoxFigure bf ON bf.box_id = b.id
           WHERE bf.figure_id IN (
             SELECT figure_id FROM FactionFigure WHERE faction_id = ?faction_id
           )
           ORDER BY b.name;

    PUT /boxes/:boxId  (ADMIN ONLY - edit collection)
    POST /boxes/:boxId (ADMIN ONLY - create collection)

    PUT /userboxes/:boxId
* Spell List FLEMS
https://flems.io/#0=N4IgtglgJlA2CmIBcB2AjAOnQGhAQwFcAXAewCV5YS8pkAzPWAZ3lzogSeQG1QA7PGERIQGABZEwsELgDGJPkXiLkIAAQa1AHigQAbmugBeADrgIRMQCcOZgHwm+mzQBlquvgHM1eAA6+MQOcNR2ctAHpdPQc+GRAWBFkiCAUuEQBmJAAGEABfbH5BYRAoACMMACsuOQUlFRF5PiYiNVk8ZvgrJjUjNW5QtWA1AY0BISRhkABxPD4oRjo1S3g1Kas8AE8zbGGnTQYklKaJ7kmAMUoqAHcmMQhfbcmAdTulNQBhEgI+WVt1AF1sCM1ExfJcmCdgRohmN4BMzABBAjrNQkRafMBgWZQR5QKwTAAsO3WXjhaj4BFgsDU+Shg3JRXhIAAQrAIHN2d4XBBPBJcfi1AAmYmzTxkilU3LA-4DWl7IbA2FMmZzBZLMQrF4WeDbYEHZKpE6TACy7PaagAKhAbJYzGpAcDQeDIXtnDDGZNWeyPFyeXyZGo8RNhWoSWKJhLqVLXfbZUD5btnErJmQaHhPO0Wss1MyrCQrnxdTH9UcIX0U2mM80AOTdBFUiCzWQ6gHx5xOqll-ox6EM8aetkcrxqbm8oj84Mi0kRylR6VxgbARUeswAZTwVgIWKc2a1SiLzhLhvLZgAkiwvBucQGzHuVp9vr9YHaHTGO8wXcF6cnEci8Kj0RITFsQnNQiVDUVxVnGk22Cd1+zML0h19MdQPSKdw3JaDo2cGU9jlaFlwQkAngsWQxAAWgAaU5AC1ARLwsSsA99jwQ5j1OMxjRIKwoB4x5EI3GgKKgZEX1gjR3y7Ol4LJRDYDYgBrNQABEN3HAMgzUABWDCyTQQUaXnfDYKXGMfxAMhOSudYLDEFiNCPY4TxAbjeP4m8WSEqARLE1tHTBTtPzgvs5JZBTZGUtSrA0nYtN0iDpzUAyjJjPCNAIwYiLCqixEESl1RWABRTNOkHTwHLUJyuxNHi+OYzzmW83yGvtCSQUCj8+hk0KmVZJTVPU0CErDfTDJwzR0tSxx-gAbkcRxGmaKq2INJoeiyvZBPWHzRIaiYhkYHk+CERQmSKvQ-h2Vb9DJIhNxWTKzAuKl81ue4zAOnw2U8E7lCIZUSBIa9rsOPQ7oemCBi4s1uitG17OQekjt+06AcmKYgZBnwwYhghHtgri6o8r6Ub+s7Jguq6ceScGJnu-Goa2kBz2UDNeM+5GfvJ9GzCp58Axuumlkhp7LMrTNa3ohsmxbUnubRwHgceIW8YJ6GSNee8vh+P55eOxWMaxlXcfp0XHFyWa4gSeB2KaVRtIADiQbSCTyAoQFhVRKmqEBGjqIhVEW1IWlKDZV06jbgEthaflKroMDoHiSvIgAKWQejsVoMCkxPk7YsRU9BTPNucCBFlTgBCMOI8ubhQQwWF-gASlL4Ia86+uAibjbuDm4EJo0Du64bpuMF8AhbnTxuimb+a+FyZu59jpaWjaDorGZDYADkig22ES-XpQE-YOZ08PmehB6IxelhZfCx+EOqoADzOGh4AAeWIDa9D4YGViMFnMyGhf7-wwHxMAGBZAKSYEwbkzQMBWHgGAEg4NU5mAYFAeAp5CwgHviAv+WDwFASgTAuBEAEE0CgOgkAmDP7EDMPg0M8AiDIicHweAVw1AAAU8yQBYKnOgj41qpyQUwEgsBwat2AZoUBRCIEYCoRdf68C6idBobMCAWI1rKGxmIiRUj54ZXvjHB+q8PhAV8FHAYl1OETFTq3QB3UYxgBoYnDgx8mCVQ0K4swicboKDOB4zo3jNAf1KBUW2RAMCKXgBsJggiAlNGbhgLEvhBEl04j2YIviQDsgnkQbgRANhgiMORW2ilSgkGfjKGQdIvwKmyV+UYHo6A7Hqc08pkV4BQAmNVbgdB-iKNxu1ZpmgFDkUghMeABgnH9JmRgIgG4xTRLHqrDald5l6EWcslhl94BDNVh05wi92lNP2GcsZPiaGlAaq3FudIl7tVyTnTqFo8ClAQKE8JkSkgxLiQk4eVIUniJig41Jfgi5WKccctQLz3xkHzKEr88LOq7yEI8UEzdRnNNRZcd48cvE3nOWMoFsAu5TSuc09xsBj6pwPk4o+nQt7ovgPS2e-i7ZMHcWfRYcyklMAGYc3GS9YVjIhekhlMQqVUrxVSAlG9-FYJwQJElMqhgKFKPAJOSCkEoOFnQV+78v4tEyjK5pd8l5WvauEcIuTbmMJtXam5dybUACp7XEFILgy5IUJlskihMRgnRTU4rMFMD+ldGFuvCAMPCpjHCQJQd8Igqc+KyC3P9DAKyioIDRlvU81CzCQEsDYAW2KLFgF8PfOI8gq0cE6KoUoHzKDW0oFE0sqh0hZGyO7QoQhvayFgbW2o-1vbvneZ8lYMjdCggUhsemHyEBGKqrUCiDBICwAXZaPAYggJ4B2EwWYTAKIsBsHQFdSdFCnogAAL30mgXwRB57RkcK8y4iKuHANnb4edi6p0UTzFcF9sd31UlZW3H9f6lhLvgBRZsVJL1rquPAP06MqmwCgCBh+YHYAKs8ZBihv7Nj-oQPBy42G310JNW3TR2ijh9PfhRL4LQsgYEFNpJglG+AAAFYkbDoOsIQ3Q6HMe-jIxyfD6QkF8GxCw260CzVSs4Ug0nZO-GKRMLISnoyvr4Eq7BTgZF0bwGtRjWCKLsjUGxzj3G+NxME0UETTGrMSaqlJjV6n5NaZ08CVTnm5OaeSr5hebbEhrTSCAQUPaON5EBCAQcik0i8E9kUVQJbrAcDiMiaQIgJBEF8BCW13xfCKU8FAoCdq7Jlp44KDAbGCRVdLRwVJ7IfZxGKWCVQTBZA2CfXF3IQA

In Progress dropdown noodling:
https://flems.io/#0=N4IgtglgJlA2CmIBcB2AjAOgKwBoQEMBXAFwHsAleWU-KZAM31gGd496IFnkBtUAO3xhESEBgAWxMLBB4AxqX7F4S5CAAEm9QB4oEAG7roAXgA64CMXEAnTuYB8p-lq0AZGnv4BzdfgAOfhhBLppOLtoA9Hr6jvyyIKwIcsQQityiAMxIAAwgAL44AkIiIFAARhgAVtzyisqqogr8zMTqcvgt8NbM6sbqPGHqwOqDmoLCSCMgAOL4-FBM9OpW8OrT1vgAnuY4I85ajMmpzZM8UwBiVNQA7sziEH47UwDq98rqAMKkhPxydhoAXRwo3UzD8V2YpxBmmG43gk3MAEFCBt1KQll8wGA5lAnlBrJMACy7DbeeHqfiEWCwdQFaFDCnFBEgABCsAg8w5PlcEC8kjxBPUACYSXMvOTKdS8iCAYM6fthiC4czZvNFstxKtXpZ4DsQYcUmlTlMALIcjrqAAqEFsVnM6iBILBEKh+xcsKZUzZHM83N5-Nk6nxkxF6lJ4smkpp0rdDrlwIVexcyqm5Fo+C8HVaK3ULOspGu-D1sYNx0h-VT6czLQA5D1EdSIHM5LrAQmXM7qeWBrGYYyJl72ZzvOoeXziAKQ6KyZGqdGZfHBsAlZ7zABlfDWQjY5w57XKYsuUtGivmACSrG8m9xgfM+9WXx+f1g9sdsc7LFdIQZKaRKPwaIYqQWI4pO6jEmGYoSnOtLtiEHoDuY3rDn645gRk04RhSMExi4sr7PKMIrohIDPJYcjiAAtAA0lygHqIi3jYtYh4HPgRwnmc5gmqQ1hQLxTxIZutCUVAKKvnBmgft29IIeSSGwOxADW6gACKbhOgbBuouCQTO6hoEKtILgRcHLrGv4gOQXLXBsljiKxmjHicp4gDxfECberLCVAoniW2Trgl2X7wf28msopcgqep1iabs2m6eG5KGcZsb4ZohFDMR4XUeIQhUhqqwAKJZl0Q5eI56jOd2pq8fxLFeSyPl+Q1DqSaCQWfv0slhcybLKWpGlgYlUGTCluFaOlqVOACADcThOE0LRVexhrNL0WX7EJGy+WJDWTMMTC8vwwhKMyRX6P8uyrQY5LEFuqyZeYlzUgWdwPOYB2+OyXgnSoxAqqQpA3tdRz6HdD2wYM3Hmj01q2g5yAMkdv2nQDUzTEDIO+GDEOEI9cHcXVnlfSjf1nVMF1XTjKTg5M9341DW0gBeKiZnxn3Iz95Po+YVMvoGN108skNPVZVZZnWDGNs2rak9zaOA8DTxC3jBPQ6RbwPt8vz-PLx2KxjWMq7j9Oi04eSzfEiTwBxzRqFgAAcSBYIS+SFCAcJqFUNQgE09TEGoi1pK0ZSbGunUbcAlsLb8IffbA5w3WkiK4xtZNo70sSaAA8mUlS28QGBKfAmzMAAFNVACU9KaBgHCwMo1jl3CWcrXbzA8HCAIYBn-29H0fdKDXvZaBg8Dg9Ymwt8UbfVV3xQ96rVfzaPoRx80rRJ3ba5UIXUeDJd8DXJM+j8MDqzGPYm0uEtrRMLAmPA+n1Lb2tzCp7T8Dl+YT83ivII74J35i-ROydmif1uj-EA-NzAANjNYeAxAUTOB7N+B+f9a7qAAPzdTXiEMA0COR+BIDwYgmxwTGAorbJSZRSAAA8AQ8GoVFeAUBjAM3gLKEAVddhYJcEiakawsbqDfmWSq35NCEPMGUBqI9JGTSwZMPOBdkjF1LhXau-DJEYGYLxYg5d5EKJ0diPwM9hBtzQcYhR0iQDENIeQyhLDaEMO4e1ax35FT4I8VoFMcJ3E+JCM4thkx57d17rjAJgStCKAoqNdQE857gM7hPDAxBNziiLuE1WG0ACE89UnpOsJkjA2TcbaOsXkXhSZom+OKHw7xxjbGyLgTUnxAIjGaDmnKC2sd2idG6PXXiJUKLlzkG3OQujOrMCGdYEZ4hy5gjbuZFwEAljl1yWHCOVweBglKYvKuN8QhbM6rswI3cNo8G6bGCamgTk7L2eEkhdwxn7OEPAqp8Dg6bzaKVawLJNgADlZ59FblfX5AyZkcHmGMiZbzL7GFBcUL5G9lr0HoUnKA8Ac4kA2mfC+yzD7nyxRgfiYAMByEUswZgPIWgYEQWAUg4NoGMCxWeIsPDV6aHxSSslFKqU0ogHS2gUAWW0GxSQOBXKwxIJQRSY+6gAAK+ZICsErk+Na5dEF6NgODQ5KytA8vgKS4CvcYAXX+rS+oXRoFzAgNiNaKhsbatILq+A8CMofNXt85amI-AH32EfE+6hDGWJBIQsRihd5JGILw8N0D66cCbswCR6hbH13AecJNXRU253zoXdRZdK7JKrhgUxldLFtMkbY+xxAyEUPgFQzUUU6GMNzaFCpdSBz0AadE4JUBQnJJ4PQJekTO2aFiXlfSiTwUFP0GkjJSD4Wjq-nkudC7ilLrKV-TtVTe3GJ7VW78zS5EOk6VoKucbYzpo-JafAZQECppUQWkuRb7nUlLXo2Khiy3+EWf68F2ib2dXIAWdtLhgNXGBcIJ4YIr0+Mg9SD4fyU23kad+d9sAzlTVqeoRNjcbVguvv0puALoPfzhKW6qiaYVLFnUOkdESv6XvHSEX9ZiiOsePQmj8yGBkZrZRy-duG+yKDKPAegvEujwEZcLdFmKJWtEyiJsKl61Pwa0BECIJ64HtS0zpnhemABUzSSBkCE0ehksT2RRUmEwLoSmAm-xzrkuBRmIiDHwjHIsJ0y06wMfxOQ25-oYEyUVBAaMAVnlFeYSAVhbAC2qX6+B8QFBgD8JwLoagyj3qoNbPeHc1BCmyEgIUGR3ZFGEN7OQ1LUt1H+t7W996EBHL0GCRSmx6bNfgNKyTShKKMEgLATrVp8DiGAvgXYzA5jMEoqwWw9Bet1DmxAAAXslNAfhiCrxjE4KZVxQPXBvm1vwHWusPvgJRfM1wdux329ScjrWhWna2OdhAlEWzUiW-1648B-TozobAKAt2fP3dgHx5NT32uveWN1j7VwQd7dZYpo5dqHXHEHViyi3xWjZAwEKLAzBEf8AAAKvvoBsYQPRkfY9xQapyKqrN+HYpYEbaBZqpRcGQJnLPyGTGyBzmMu3+ACfgOy1H-B7X4DWpjy7HJ1B48J8TsnpcKfFGp+Kyi8v6dVUZ8MUgzO-h84V4LkE3P9eG9Z2NU3-A8j5ZjWWIrJWCf5CBCAIcSl0h8E9sUNQcWbCcHiCiGQohJDED8JCLTPw-BKS8BS4C2n7IJZJ0KDAePCSJ-i5wMtHIfbxEcSUZgchbBbdd3kIAA

* Useful Gigalixir Commands

For troubleshooting, See:      http://gigalixir.readthedocs.io/en/latest/main.html#troubleshooting
For help, contact:             help@gigalixir.com
Try hitting your app with:     curl https://homely-uncomfortable-wreckfish.gigalixirapp.com/
Check your app logs with:      gigalixir logs -a homely-uncomfortable-wreckfish
Check deploy status with:      gigalixir ps -a homely-uncomfortable-wreckfish

*** Deploy a branch: $ git push gigalixir  # or git push gigalixir foo:master to deploy local branch 'foo'
*** Run migrations: # gx ps:migrate

* Character<->Figure Testing

|------------------------------------------------------+---------------------+-------------------------------------|
| CASE                                                 | EXAMPLE NAME        | URL                                 |
|------------------------------------------------------+---------------------+-------------------------------------|
| Figure with no character                             | Dead Orc            | http://127.0.0.1:3333/#/figures/822 |
| Figure with one character                            | Angbor the Fearless | http://127.0.0.1:3333/#/figures/258 |
| Figure with multiple characters for same faction     | Gil-galad           | http://127.0.0.1:3333/#/figures/636 |
| Figure with multiple characters in multiple factions | Frodo               | http://127.0.0.1:3333/#/figures/151                                    |
|------------------------------------------------------+---------------------+-------------------------------------|

* Find faction images which are not 200x200

$ find app/assets/images/factions -name '*.png' -exec file {} \; | grep -v "200 x 200" | sort

* Regression Testing

*** Logged Out
Scenario List - test filters, can't rate
Scenario Detail - can't rate
Figures List
Faction List, any affiliated
Faction List, unaffiliated
Login
Stats
About - Older News, Older Reports

*** Logged In
Login
Scenario List - test filters, can rate, can unrate
Scenario Detail - can rate, can unrate, can edit, can edit faction, can add resource
Figures list
Faction List, affiliated, can add owned, can add painted, can add new figure
Faction List, unaffiliated - can add owned, can add painted
Accounts page - filters, can change password (tests Log Out, too)
Stats
About - (ack Older News/Reports don't seem to always appear, but that's FE not BE)
Character editor - new character, edit character
